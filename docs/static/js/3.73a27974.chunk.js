(this.webpackJsonpmovieratings=this.webpackJsonpmovieratings||[]).push([[3],{51:function(e,t,a){"use strict";a.r(t);var r=a(22);var n=a(30);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=a(0),s=a.n(o),i=a(14),l=a(3),d=a(29),b=function(e,t){return{backdrop_url:t.backdrop_path?d.a.img.baseUrl+d.a.img.backdropSize+t.backdrop_path:null,id:t.id,LetterboxdURI:e.LetterboxdURI,original_language:t.original_language.toUpperCase(),original_title:t.original_title,overview:t.overview,poster_url:t.poster_path?d.a.img.baseUrl+d.a.img.posterSize+t.poster_path:null,Rating:e.Rating,release_year:t.release_date.split("-")[0],title:t.title,tmdbURI:"https://www.themoviedb.org/movie/".concat(t.id),vote_average:t.vote_average,vote_count:t.vote_count}},m=a(1),u=s.a.createContext(),j={movieInfo:{backdrop_url:d.a.img.fallbackUrl,id:"",LetterboxdURI:"",overview:"",poster_url:d.a.img.fallbackUrl,Rating:"",title:"",vote_average:""},movieInfoStatus:""};function v(e,t){switch(t.type){case"setMovieInfo":return Object(l.a)(Object(l.a)({},e),{},{movieInfo:t.payload,movieInfoStatus:"loaded"});case"setMovieInfoStatus":return Object(l.a)(Object(l.a)({},e),{},{movieInfoStatus:t.payload});default:throw new Error}}var h=function(e){var t=e.children,a=e.movie,r=Object(o.useReducer)(v,j),n=Object(i.a)(r,2),c=n[0],s=n[1],l=Object(o.useCallback)((function(){void 0!==a?(s({type:"setMovieInfoStatus",payload:"loading"}),function(e){return fetch("".concat(d.a.url).concat(d.a.pathSearchMovies,"?").concat(d.a.key,"&query=").concat(e.Name,"&year=").concat(e.Year)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))}(a).then((function(e){if(!e.results.length)throw Error("No movie found");var t=e.results.find((function(e){return e.title===a.Name&&e.release_date.indexOf(a.Year)>-1}));if(void 0===t)throw Error("No movie found");s({type:"setMovieInfo",payload:b(a,t)})})).catch((function(){s({type:"setMovieInfoStatus",payload:"error"})}))):s({type:"setMovieInfoStatus",payload:"error"})}),[a]);Object(o.useEffect)((function(){l()}),[l]);var h=Object(o.useMemo)((function(){return c}),[c]);return Object(m.jsx)(u.Provider,{value:h,children:t})};h.defaultProps={movie:void 0};var f=a(27),p=a(28),O=a(26),x=function(e){return Object(l.a)(Object(l.a)({},e),{},{cast:e.cast.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})})),crew:e.crew.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})}))})},g=s.a.createContext(),y={movieCredits:{cast:[],crew:[],id:""},movieCreditsStatus:""};function w(e,t){switch(t.type){case"setMovieCredits":return Object(l.a)(Object(l.a)({},e),{},{movieCredits:t.payload,movieCreditsStatus:"loaded"});case"setMovieCreditsStatus":return Object(l.a)(Object(l.a)({},e),{},{movieCreditsStatus:t.payload});default:throw new Error}}var N=function(e){var t=e.children,a=e.movieId,r=Object(o.useReducer)(w,y),n=Object(i.a)(r,2),c=n[0],s=n[1];function l(e){s({type:"setMovieCreditsStatus",payload:"loading"}),function(e){var t="".concat(d.a.url).concat(d.a.pathMovieCredits,"?").concat(d.a.key).replace("{movie_id}",e);return fetch(t).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))}(e).then((function(e){s({type:"setMovieCredits",payload:x(e)})})).catch((function(){s({type:"setMovieCreditsStatus",payload:"error"})}))}Object(o.useEffect)((function(){l(a)}),[a]);var b=Object(o.useMemo)((function(){return c}),[c]);return Object(m.jsx)(g.Provider,{value:b,children:t})},_=function(e){return e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{poster_url:e.poster_path?d.a.img.baseUrl+d.a.img.posterSize+e.poster_path:null,tmdbURI:"https://www.themoviedb.org/movie/".concat(e.id)})}))},I=s.a.createContext(),R={movieRecommendations:[],movieRecommendationsStatus:""};function S(e,t){switch(t.type){case"setMovieRecommendations":return Object(l.a)(Object(l.a)({},e),{},{movieRecommendations:t.payload,movieRecommendationsStatus:"loaded"});case"setMovieRecommendationsStatus":return Object(l.a)(Object(l.a)({},e),{},{movieRecommendationsStatus:t.payload});default:throw new Error}}var k=function(e){var t=e.children,a=e.movieId,r=Object(o.useReducer)(S,R),n=Object(i.a)(r,2),c=n[0],s=n[1];function l(e){s({type:"setMovieRecommendationsStatus",payload:"loading"}),function(e){var t="".concat(d.a.url).concat(d.a.pathMovieRecommendations,"?").concat(d.a.key).replace("{movie_id}",e);return fetch(t).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))}(e).then((function(e){s({type:"setMovieRecommendations",payload:_(e.results)})})).catch((function(){s({type:"setMovieRecommendationsStatus",payload:"error"})}))}Object(o.useEffect)((function(){l(a)}),[a]);var b=Object(o.useMemo)((function(){return c}),[c]);return Object(m.jsx)(I.Provider,{value:b,children:t})},C=function(e){var t=e.src,a=e.title,r=e.type,n={backdrop:{height:300,width:533},poster:{height:450,width:300}}[r],c={paddingTop:"".concat(n.height/n.width*100,"%")};return Object(m.jsx)("div",{className:"bg-secondary ratio text-white",style:c,children:t?Object(m.jsx)("img",{alt:"".concat(r," for ").concat(a),loading:"lazy",src:t}):Object(m.jsx)("div",{className:"p-3 text-center",children:"No ".concat(r," available for ").concat(a)})})};C.defaultProps={src:null};var M=C,U=a(10),E=function(e){var t=e.children;return Object(m.jsx)("ul",{className:"flex-nowrap g-3 list-unstyled mb-0 pb-3 row",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t})},D=function(){var e=Object(o.useContext)(g),t=e.movieCredits,a=e.movieCreditsStatus;return Object(m.jsxs)(O.a,{dataStatus:a,hasData:!!t.id,children:[Object(m.jsxs)("h2",{className:"h4",children:["Cast",Object(m.jsx)(U.a,{className:"ms-1 small",icon:"external-link-alt"})]}),t.cast.length?Object(m.jsx)(E,{children:t.cast.map((function(e){return Object(m.jsx)("li",{className:"col-auto",children:Object(m.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(m.jsx)("div",{className:"small",children:e.character})]})},e.credit_id)}))}):Object(m.jsx)("p",{children:"No data available"}),Object(m.jsxs)("h2",{className:"h4",children:["Crew",Object(m.jsx)(U.a,{className:"ms-1 small",icon:"external-link-alt"})]}),t.crew.length?Object(m.jsx)(E,{children:t.crew.map((function(e){return Object(m.jsx)("li",{className:"col-auto",children:Object(m.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(m.jsx)("div",{className:"small",children:e.job})]})},e.credit_id)}))}):Object(m.jsx)("p",{children:"No data available"})]})},L=a(16),P=function(){var e=Object(o.useContext)(I),t=e.movieRecommendations,a=e.movieRecommendationsStatus;return Object(m.jsx)(O.a,{dataStatus:a,hasData:!!t.length,children:Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsxs)("h2",{className:"h4",children:["Recommendations",Object(m.jsx)(U.a,{className:"ms-1 small",icon:"external-link-alt"})]}),Object(m.jsx)(E,{children:t.map((function(e){return Object(m.jsx)("li",{className:"col-5 col-md-3 col-lg-2",children:Object(m.jsxs)(L.a,{href:e.tmdbURI,target:"_blank",children:[Object(m.jsx)(M,{src:e.poster_url,title:e.title,type:"poster"}),e.title]})},e.id)}))})]})})},z=function(){var e=Object(o.useContext)(u).movieInfo;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[Object(m.jsx)("div",{className:"col-6 col-lg-4",children:Object(m.jsx)(M,{src:e.poster_url,title:e.title,type:"poster"})}),Object(m.jsxs)("div",{className:"col-12 col-sm-6 col-lg-8 text-end",children:[Object(m.jsx)("div",{className:"lead text-start",children:e.overview}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("span",{className:"badge bg-secondary ms-2",children:e.original_language})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("a",{className:"btn btn-danger btn-sm",href:e.LetterboxdURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at Letterboxd"})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("a",{className:"btn btn-danger btn-sm",href:e.tmdbURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at TMDB"})})]})]}),Object(m.jsx)(N,{movieId:e.id,children:Object(m.jsx)(D,{})})]}),Object(m.jsx)(M,{src:e.backdrop_url,title:e.title,type:"backdrop"}),Object(m.jsx)(k,{movieId:e.id,children:Object(m.jsx)(P,{})})]})},T=function(){var e=Object(o.useContext)(u).movieInfo;return Object(m.jsxs)("div",{className:"bg-secondary p-3",children:[Object(m.jsxs)("h1",{className:"h3",children:[e.title,Object(m.jsx)("span",{className:"font-italic ms-2 small",children:"(".concat(e.release_year).concat(e.title!==e.original_title?', "'.concat(e.original_title,'"'):"",")")})]}),Object(m.jsxs)("div",{className:"small",children:[e.Rating," of 5",Object(m.jsx)(U.a,{className:"mx-1 text-warning",icon:"star"}),Object(m.jsx)("span",{className:"small",children:"by me"})]}),Object(m.jsxs)("div",{className:"small",children:[e.vote_average," of 10",Object(m.jsx)(U.a,{className:"mx-1 text-warning",icon:"star"}),Object(m.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})},A=function(){var e=Object(o.useContext)(u),t=e.movieInfo,a=e.movieInfoStatus;return Object(m.jsx)(O.a,{dataStatus:a,hasData:""!==t.id,children:Object(m.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[Object(m.jsx)(T,{}),Object(m.jsx)(z,{})]})})};t.default=function(e){var t=e.match,a=Object(o.useContext)(f.b).movieDiary,r=Object(o.useContext)(p.b).movieRatings,n=t.params.movieId,s=[].concat(c(a),c(r)).find((function(e){return e.Id===n}));return Object(m.jsx)(h,{movie:s,children:Object(m.jsx)(A,{})})}}}]);
//# sourceMappingURL=3.73a27974.chunk.js.map