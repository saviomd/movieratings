"use strict";(self.webpackChunkmovieratings=self.webpackChunkmovieratings||[]).push([[372],{545:function(e,t,r){r.d(t,{Z:function(){return a}});r(791);var n=r(184);var a=function(e){var t=e.children;return(0,n.jsx)("ul",{className:"flex-nowrap g-3 list-unstyled row",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t})}},372:function(e,t,r){r.r(t),r.d(t,{default:function(){return Q}});var n=r(982),a=r(791),i=r(819),s=r(82),o=function(e){var t=e.path,r=e.queryString,n=void 0===r?"":r,a=s.Z.url,i=s.Z.key;return fetch("".concat(a).concat(t,"?api_key=").concat(i).concat(n)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))},l=s.Z.methods,c=l.movieDetails,u=l.searchMovies,d=r(885),m=r(683),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),h=function(e){var t=e.value;return t?"US".concat(v.format(t)):"--"},p=r(997),f=s.Z.img.profile,x=function(e){var t=e.person;return(0,m.Z)((0,m.Z)((0,m.Z)({},t),t.job&&{job:[t.job]}),{},{profile_url:f({path:t.profile_path}),tmdbURI:"https://www.themoviedb.org/person/".concat(t.id)})},j=function(e){var t=e.credits;return(0,m.Z)((0,m.Z)({},t),{},{cast:null===t||void 0===t?void 0:t.cast.map((function(e){return x({person:e})})).sort((function(e,t){return e.order-t.order})),crew:null===t||void 0===t?void 0:t.crew.reduce((function(e,t){var r=e.find((function(e){return e.id===t.id}));return r?(r.job=[].concat((0,n.Z)(r.job),[t.job]),e):[].concat((0,n.Z)(e),[x({person:t})])}),[]).sort((function(e,t){return t.popularity-e.popularity}))})},g=s.Z.img.poster,b=function(e){return e.movies.map((function(e){return(0,m.Z)((0,m.Z)({},e),{},{poster_url:g({path:e.poster_path}),tmdbURI:"https://www.themoviedb.org/movie/".concat(e.id)})}))},_=s.Z.img,N=_.backdrop,w=_.logo,y=_.poster,Z=function(e){var t,r,n,a,i=e.movie,s=e.movieDetails;return(0,m.Z)((0,m.Z)({},s),{},{backdrop_url:N({path:s.backdrop_path}),budget:h({value:s.budget}),credits:j({credits:s.credits}),flatrate:(null===(t=s["watch/providers"])||void 0===t||null===(r=t.results)||void 0===r||null===(n=r.BR)||void 0===n||null===(a=n.flatrate)||void 0===a?void 0:a.map((function(e){return(0,m.Z)((0,m.Z)({},e),e.logo_path&&{logo_url:w({path:e.logo_path})})})))||[],LetterboxdURI:i.LetterboxdURI,original_language:s.original_language.toUpperCase(),poster_url:y({path:s.poster_path}),Rating:i.Rating,recommendations:b({movies:s.recommendations.results}),release_date:(0,p.Z)({date:s.release_date}),release_year:s.release_date.split("-")[0],revenue:h({value:s.revenue}),tmdbURI:"https://www.themoviedb.org/movie/".concat(s.id)})},D={movieDetails:{},movieDetailsStatus:""};function S(e,t){var r=t.payload;switch(t.type){case"SET_MOVIE_DETAILS":var n=r.movie,a=r.movieDetails;return(0,m.Z)((0,m.Z)({},e),{},{movieDetails:Z({movie:n,movieDetails:a}),movieDetailsStatus:"loaded"});case"SET_MOVIE_DETAILS_STATUS":return(0,m.Z)((0,m.Z)({},e),{},{movieDetailsStatus:r});default:throw new Error}}var k=function(){var e=(0,a.useReducer)(S,D),t=(0,d.Z)(e,2),r=t[0],n=t[1],i=(0,a.useMemo)((function(){return{setMovieDetails:function(e){return n({type:"SET_MOVIE_DETAILS",payload:e})},setMovieDetailsStatus:function(e){return n({type:"SET_MOVIE_DETAILS_STATUS",payload:e})}}}),[]);return(0,m.Z)((0,m.Z)({},r),{},{boundActions:i})},I=r(184),R=(0,a.createContext)(),U=function(){return(0,a.useContext)(R)};function E(e){var t=e.children,r=e.movie,n=k(),i=(0,a.useCallback)((function(){if(void 0!==r){var e=r.Name,t=r.Year;n.boundActions.setMovieDetailsStatus("loading"),function(e){var t=e.Name,r=e.Year;return o({path:u(),queryString:"&query=".concat(t,"&year=").concat(r)})}({Name:e,Year:t}).then((function(a){if(!a.results.length)throw Error("No movie found");var i=a.results.find((function(r){return r.title===e&&r.release_date.indexOf(t)>-1}));if(void 0===i)throw Error("No movie found");(function(e){var t=e.movieId;return o({path:c({movieId:t}),queryString:"&append_to_response=credits,recommendations,watch/providers"})})({movieId:i.id}).then((function(e){n.boundActions.setMovieDetails({movie:r,movieDetails:e})}))})).catch((function(){n.boundActions.setMovieDetailsStatus("error")}))}else n.boundActions.setMovieDetailsStatus("error")}),[r,n.boundActions]);return(0,a.useEffect)((function(){i()}),[i]),(0,I.jsx)(R.Provider,{value:n,children:t})}E.defaultProps={movie:void 0};var T=r(423),A=r(301),M=r(548),L=r(363);function C(e){var t=e.src,r=e.title,n=e.type,a={backdrop:{height:300,width:533},poster:{height:450,width:300},profile:{height:278,width:185}}[n],i={paddingTop:"".concat(a.height/a.width*100,"%")};return(0,I.jsx)("div",{className:"bg-secondary ratio overflow-hidden text-white",style:i,children:t?(0,I.jsx)("img",{alt:"".concat(n," for ").concat(r),loading:"lazy",src:t}):(0,I.jsx)("div",{className:"p-3 small text-center",children:"No ".concat(n," image available for ").concat(r)})})}C.defaultProps={src:null};var O=C,q=r(889),G=r(545);var P=function(){var e=U().movieDetails;return e.credits?["cast","crew"].map((function(t){return(0,I.jsxs)(a.Fragment,{children:[(0,I.jsxs)("h2",{className:"h4",children:["".concat(t[0].toUpperCase()).concat(t.slice(1)),(0,I.jsx)(L.G,{className:"ms-1 small",icon:"external-link-alt"})]}),e.credits[t].length?(0,I.jsx)(G.Z,{children:e.credits[t].map((function(e){var t;return(0,I.jsx)("li",{className:"col-5 col-sm-3 col-md-2",children:(0,I.jsxs)(q.Z,{href:e.tmdbURI,target:"_blank",children:[(0,I.jsx)(O,{src:e.profile_url,title:e.name,type:"profile"}),e.name,(0,I.jsx)("div",{className:"fst-italic small",children:e.character||(null===(t=e.job)||void 0===t?void 0:t.join(" / "))})]})},e.id)}))}):(0,I.jsx)("p",{children:"No data available"})]},t)})):null},V=P;var B=function(){var e=U().movieDetails;return e.recommendations.length?(0,I.jsxs)("div",{className:"p-3",children:[(0,I.jsxs)("h2",{className:"h4",children:["Recommendations",(0,I.jsx)(L.G,{className:"ms-1 small",icon:"external-link-alt"})]}),(0,I.jsx)(G.Z,{children:e.recommendations.map((function(e){return(0,I.jsx)("li",{className:"col-5 col-md-3 col-lg-2",children:(0,I.jsxs)(q.Z,{href:e.tmdbURI,target:"_blank",children:[(0,I.jsx)(O,{src:e.poster_url,title:e.title,type:"poster"}),e.title]})},e.id)}))})]}):null},F=B;var Y=function(){var e=U().movieDetails,t=e.budget,r=e.flatrate,n=e.genres,a=e.production_companies,i=e.production_countries,s=e.release_date,o=e.revenue,l=e.runtime,c=e.spoken_languages,u=[{title:"Runtime",value:"".concat(l," minutes")},{title:"Release date",value:s},{title:"Genres",value:n.map((function(e){return e.name}))},{title:"Budget",value:t},{title:"Revenue",value:o},{title:"Production companies",value:a.map((function(e){return e.name}))},{title:"Production countries",value:i.map((function(e){return e.name}))},{title:"Spoken languages",value:c.map((function(e){return e.english_name}))}];return(0,I.jsxs)(G.Z,{children:[(0,I.jsxs)("li",{className:"col-auto",children:[(0,I.jsx)("div",{children:"Streaming in Brazil on"}),r.length?(0,I.jsx)("ul",{className:"list-inline",children:r.map((function(e){var t=e.logo_url,r=e.provider_name;return(0,I.jsx)("li",{className:"list-inline-item",children:(0,I.jsx)("img",{alt:r,height:48,src:t})},r)}))}):(0,I.jsx)("div",{className:"fw-bold",children:"None"})]}),u.map((function(e){var t=e.title,r=e.value;return(0,I.jsxs)("li",{className:"col-auto",children:[(0,I.jsx)("div",{children:t}),Array.isArray(r)?(0,I.jsx)("ul",{className:"fw-bold list-unstyled",children:r.map((function(e){return(0,I.jsx)("li",{children:(0,I.jsx)("span",{className:"badge bg-secondary",children:e})},e)}))}):(0,I.jsx)("div",{className:"fw-bold",children:r})]},t)}))]})};var z=function(){var e=U().movieDetails;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"p-3",children:[(0,I.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[(0,I.jsx)("div",{className:"col-6 col-lg-4",children:(0,I.jsx)(O,{src:e.poster_url,title:e.title,type:"poster"})}),(0,I.jsx)("div",{className:"col-12 col-sm-6 col-lg-8 lead",children:e.overview})]}),(0,I.jsx)(Y,{}),(0,I.jsx)(V,{}),e.tagline&&(0,I.jsx)("blockquote",{className:"blockquote px-5 text-center",children:'"'.concat(e.tagline,'"')})]}),(0,I.jsx)(O,{src:e.backdrop_url,title:e.title,type:"backdrop"}),(0,I.jsxs)("div",{className:"p-3 text-end",children:[(0,I.jsxs)("div",{children:["View movie at",(0,I.jsx)(L.G,{className:"ms-1 small",icon:"external-link-alt"})]}),(0,I.jsx)("ul",{className:"list-inline",children:[{href:"LetterboxdURI",name:"Letterboxd"},{href:"tmdbURI",name:"TMDb"}].map((function(t){var r=t.href,n=t.name;return(0,I.jsx)("li",{className:"list-inline-item",children:(0,I.jsx)("a",{className:"btn btn-danger btn-sm",href:e[r],target:"_blank",rel:"noopener noreferrer",children:n})},n)}))})]}),(0,I.jsx)(F,{})]})},W=z;var X=function(){var e=U().movieDetails;return(0,I.jsxs)("div",{className:"bg-secondary p-3",children:[(0,I.jsxs)("h1",{className:"h3",children:[e.title,(0,I.jsxs)("span",{className:"font-italic ms-2 small",children:["(".concat(e.release_year),e.title!==e.original_title&&', "'.concat(e.original_title,'"'),")"]})]}),(0,I.jsxs)("div",{className:"small",children:[e.Rating," of 5",(0,I.jsx)(L.G,{className:"mx-1 text-warning",icon:"star"}),(0,I.jsx)("span",{className:"small",children:"by me"})]}),(0,I.jsxs)("div",{className:"small",children:[e.vote_average," of 10",(0,I.jsx)(L.G,{className:"mx-1 text-warning",icon:"star"}),(0,I.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})},H=X;var J=function(){var e=U(),t=e.movieDetails,r=e.movieDetailsStatus;return(0,I.jsx)(M.Z,{dataStatus:r,hasData:""!==t.id,children:(0,I.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[(0,I.jsx)(H,{}),(0,I.jsx)(W,{})]})})},K=J;var Q=function(){var e=(0,T.aR)().movieDiary,t=(0,A.D6)().movieRatings,r=(0,i.UO)().movieId,a=[].concat((0,n.Z)(e),(0,n.Z)(t)).find((function(e){return e.Id===r}));return(0,I.jsx)(E,{movie:a,children:(0,I.jsx)(K,{})})}}}]);
//# sourceMappingURL=372.470ab59a.chunk.js.map