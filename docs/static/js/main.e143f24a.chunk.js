(this.webpackJsonpmovieratings=this.webpackJsonpmovieratings||[]).push([[0],{22:function(e,t,a){e.exports=a(36)},36:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),n=a(20),s=a.n(n),c=a(11),i=a(6),l=a(4),m=a(13),d=a(10),v=a(1);function u(e,t){return e.filter(e=>e.Name.toLowerCase().includes(t.toLowerCase()))}function g(e){return e.reverse(),e=e.map((e,t)=>(e.Id=e.LetterboxdURI.length?e.LetterboxdURI.split("/film/")[1].split("/")[0]:t.toString(),e.Name=e.Name.toString(),e.DateFormatted=new Date(e.Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),e.WatchedDate&&(e.WatchedDateFormatted=new Date(e.WatchedDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})),e))}const p=o.a.createContext(),b={movieDiary:[],movieDiaryPage:1,movieDiarySearchString:"",movieDiaryStatus:""};function h(e,t){switch(t.type){case"setMovieDiary":return Object(v.a)(Object(v.a)({},e),{},{movieDiary:t.payload,movieDiaryStatus:"loaded"});case"setMovieDiaryPage":return Object(v.a)(Object(v.a)({},e),{},{movieDiaryPage:e.movieDiaryPage+1});case"setMovieDiarySearchString":return Object(v.a)(Object(v.a)({},e),{},{movieDiarySearchString:t.payload.toLowerCase()});case"setMovieDiaryStatus":return Object(v.a)(Object(v.a)({},e),{},{movieDiaryStatus:t.payload});default:throw new Error}}const y=({children:e})=>{const t=Object(r.useReducer)(h,b),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useMemo)(()=>u(n.movieDiary,n.movieDiarySearchString),[n.movieDiary,n.movieDiarySearchString]),l=Object(r.useMemo)(()=>{const e=100*n.movieDiaryPage;return c.slice(0,e)},[c,n.movieDiaryPage]),m=Object(r.useMemo)(()=>{const e=n.movieDiary.reduce((e,t)=>{const a=t.WatchedDate.split("-")[0];return e[a]?e[a]++:e[a]=1,e},{});let t=0;for(const a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}},[n.movieDiary]);function d(){return s({type:"setMovieDiaryStatus",payload:"loading"}),fetch("https://saviomd.com/movieratings/data/diary.json").then(e=>{if(!e.ok)throw Error(e.status);return e.json()}).then(e=>{const t=g(e);return s({type:"setMovieDiary",payload:t}),t}).catch(e=>{s({type:"setMovieDiaryStatus",payload:"error"}),console.log(e.message)})}Object(r.useEffect)(()=>{d()},[]);const y=Object(r.useMemo)(()=>Object(v.a)(Object(v.a)({},n),{},{dispatchMovieDiary:s,movieDiaryFiltered:c,movieDiaryPaginated:l,moviesPerYearWatched:m}),[c,l,m,n]);return o.a.createElement(p.Provider,{value:y},e)},E=o.a.createContext(),f={movieRatings:[],movieRatingsPage:1,movieRatingsSearchString:"",movieRatingsStatus:""};function w(e,t){switch(t.type){case"setMovieRatings":return Object(v.a)(Object(v.a)({},e),{},{movieRatings:t.payload,movieRatingsStatus:"loaded"});case"setMovieRatingsPage":return Object(v.a)(Object(v.a)({},e),{},{movieRatingsPage:e.movieRatingsPage+1});case"setMovieRatingsSearchString":return Object(v.a)(Object(v.a)({},e),{},{movieRatingsSearchString:t.payload.toLowerCase()});case"setMovieRatingsStatus":return Object(v.a)(Object(v.a)({},e),{},{movieRatingsStatus:t.payload});default:throw new Error}}const N=({children:e})=>{const t=Object(r.useReducer)(w,f),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useMemo)(()=>u(n.movieRatings,n.movieRatingsSearchString),[n.movieRatings,n.movieRatingsSearchString]),l=Object(r.useMemo)(()=>{const e=100*n.movieRatingsPage;return c.slice(0,e)},[c,n.movieRatingsPage]),m=Object(r.useMemo)(()=>{const e=n.movieRatings.reduce((e,t)=>{const a="".concat(t.Year.toString().substr(0,3),"0");return e[a]?e[a]++:e[a]=1,e},{});let t=0;for(const a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}},[n.movieRatings]),d=Object(r.useMemo)(()=>{const e=n.movieRatings.reduce((e,t)=>{const a=t.Rating;return e[a]?e[a]++:e[a]=1,e},{});let t=0;for(const a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}},[n.movieRatings]);function p(){return s({type:"setMovieRatingsStatus",payload:"loading"}),fetch("https://saviomd.com/movieratings/data/ratings.json").then(e=>{if(!e.ok)throw Error(e.status);return e.json()}).then(e=>{const t=g(e);return s({type:"setMovieRatings",payload:t}),t}).catch(e=>{s({type:"setMovieRatingsStatus",payload:"error"}),console.log(e.message)})}Object(r.useEffect)(()=>{p()},[]);const b=Object(r.useMemo)(()=>Object(v.a)(Object(v.a)({},n),{},{dispatchMovieRatings:s,movieRatingsFiltered:c,movieRatingsPaginated:l,moviesPerDecadeReleased:m,moviesPerRatingGiven:d}),[c,l,m,d,n]);return o.a.createElement(E.Provider,{value:b},e)};var S=a(3);var R=Object(r.memo)((function(){const e=(new Date).getFullYear();return o.a.createElement("footer",{className:"border-secondary border-top mb-3 pt-3 small text-center"},"\xa9 2017-",e,o.a.createElement("a",{className:"ml-1 text-danger",href:"http://saviomd.com/",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{alt:"saviomd.com",className:"mr-1",src:"https://saviomd.com/img/favicon.png",height:"15",width:"15"}),"S\xe1vio Mendes",o.a.createElement(S.a,{className:"ml-1 small",icon:"external-link-alt"})))}));var j=({link:e})=>o.a.createElement(c.c,{to:e.path,exact:!0,activeClassName:"active",className:"btn btn-danger btn-sm"},o.a.createElement(S.a,{icon:e.icon}),o.a.createElement("span",{className:"d-none d-sm-inline-block ml-1"},e.name));var O=({navLinks:e})=>o.a.createElement("nav",{className:"btn-group"},e.map(e=>o.a.createElement(j,{key:e.path,link:e})));var x=({navLinks:e})=>o.a.createElement("header",{className:"border-bottom border-secondary mb-3"},o.a.createElement("div",{className:"align-items-center my-2 row"},o.a.createElement("h1",{className:"col-auto h5 mb-0"},o.a.createElement(c.c,{to:"/",exact:!0,className:"text-white"},"Movie Ratings")),o.a.createElement("div",{className:"col text-right"},o.a.createElement(O,{navLinks:e})))),D={attributionUrl:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",baseUrl:"https://image.tmdb.org/t/p/",backdropSize:"w1280",fallbackUrl:"https://www.themoviedb.org/assets/1/v4/logos/293x302-powered-by-square-blue-ee05c47ab249273a6f9f1dcafec63daba386ca30544567629deb1809395d8516.png",posterSize:"w780"},M="api_key=6f875d4fba2e999f480afa6275a08f75",k="movie/{movie_id}/credits",_="movie/{movie_id}/recommendations",P="search/movie",C="https://api.themoviedb.org/3/";function I(e,t){return{backdrop_url:t.backdrop_path?D.baseUrl+D.backdropSize+t.backdrop_path:null,id:t.id,LetterboxdURI:e.LetterboxdURI,original_language:t.original_language.toUpperCase(),original_title:t.original_title,overview:t.overview,poster_url:t.poster_path?D.baseUrl+D.posterSize+t.poster_path:null,Rating:e.Rating,release_year:t.release_date.split("-")[0],title:t.title,tmdbURI:"https://www.themoviedb.org/movie/".concat(t.id),vote_average:t.vote_average,vote_count:t.vote_count}}const F=o.a.createContext(),U={movieInfo:{backdrop_url:D.fallbackUrl,id:"",LetterboxdURI:"",overview:"",poster_url:D.fallbackUrl,Rating:"",title:"",vote_average:""},movieInfoStatus:""};function L(e,t){switch(t.type){case"setMovieInfo":return Object(v.a)(Object(v.a)({},e),{},{movieInfo:t.payload,movieInfoStatus:"loaded"});case"setMovieInfoStatus":return Object(v.a)(Object(v.a)({},e),{},{movieInfoStatus:t.payload});default:throw new Error}}const T=({children:e,movie:t})=>{const a=Object(r.useReducer)(L,U),n=Object(i.a)(a,2),s=n[0],c=n[1];function l(e){void 0!==e?(c({type:"setMovieInfoStatus",payload:"loading"}),(e=>fetch("".concat(C).concat(P,"?").concat(M,"&query=").concat(e.Name,"&year=").concat(e.Year)).then(e=>{if(!e.ok)throw Error(e.status);return e.json()}))(e).then(t=>{if(!t.results.length)throw Error("No movie found");{const a=t.results.find(t=>t.title===e.Name&&t.release_date.indexOf(e.Year)>-1);if(void 0===a)throw Error("No movie found");c({type:"setMovieInfo",payload:I(e,a)})}}).catch(e=>{c({type:"setMovieInfoStatus",payload:"error"}),console.log(e.message)})):c({type:"setMovieInfoStatus",payload:"error"})}Object(r.useEffect)(()=>{l(t)},[t]);const m=Object(r.useMemo)(()=>s,[s]);return o.a.createElement(F.Provider,{value:m},e)};var W=Object(r.memo)((function({type:e}){const t={error:{icon:"sad-tear",text:"An error has ocurred"},loading:{icon:"hourglass-half",text:"Loading..."},noData:{icon:"frown",text:"No data to show"},noMovies:{icon:"frown",text:"No movies to show"},noStats:{icon:"frown",text:"No stats to show"},pageNotFound:{icon:"dizzy",text:"Page not found"}},a="animate__".concat("loading"===e?"heartBeat":"headShake");return o.a.createElement("div",{className:"lead p-3 text-center"},o.a.createElement("div",{className:"animate__animated ".concat(a," h3 mb-3")},o.a.createElement("span",{className:"bg-secondary p-2 rounded"},o.a.createElement(S.a,{icon:t[e].icon}))),t[e].text)}));const A=Object(r.memo)((function({children:e,dataStatus:t,hasData:a,messageNoData:r}){return o.a.createElement(o.a.Fragment,null,"loaded"===t&&a&&o.a.createElement(o.a.Fragment,null,e),"loaded"===t&&!a&&o.a.createElement(W,{type:r}),("loading"===t||"error"===t)&&o.a.createElement(W,{type:t}))}));A.defaultProps={dataStatus:"",hasData:!0,messageNoData:"noData"};var Y=A;const z=o.a.createContext(),B={movieCredits:{cast:[],crew:[],id:""},movieCreditsStatus:""};function G(e,t){switch(t.type){case"setMovieCredits":return Object(v.a)(Object(v.a)({},e),{},{movieCredits:t.payload,movieCreditsStatus:"loaded"});case"setMovieCreditsStatus":return Object(v.a)(Object(v.a)({},e),{},{movieCreditsStatus:t.payload});default:throw new Error}}const q=({children:e,movieId:t})=>{const a=Object(r.useReducer)(G,B),n=Object(i.a)(a,2),s=n[0],c=n[1];function l(e){c({type:"setMovieCreditsStatus",payload:"loading"}),(e=>{const t="".concat(C).concat(k,"?").concat(M).replace("{movie_id}",e);return fetch(t).then(e=>{if(!e.ok)throw Error(e.status);return e.json()})})(e).then(e=>{var t;c({type:"setMovieCredits",payload:(t=e,t.cast.forEach(e=>{e.tmdbURI="https://www.themoviedb.org/person/".concat(e.id)}),t.crew.forEach(e=>{e.tmdbURI="https://www.themoviedb.org/person/".concat(e.id)}),t)})}).catch(e=>{c({type:"setMovieCreditsStatus",payload:"error"}),console.log(e.message)})}Object(r.useEffect)(()=>{l(t)},[t]);const m=Object(r.useMemo)(()=>s,[s]);return o.a.createElement(z.Provider,{value:m},e)};const J=o.a.createContext(),V={movieRecommendations:[],movieRecommendationsStatus:""};function X(e,t){switch(t.type){case"setMovieRecommendations":return Object(v.a)(Object(v.a)({},e),{},{movieRecommendations:t.payload,movieRecommendationsStatus:"loaded"});case"setMovieRecommendationsStatus":return Object(v.a)(Object(v.a)({},e),{},{movieRecommendationsStatus:t.payload});default:throw new Error}}const $=({children:e,movieId:t})=>{const a=Object(r.useReducer)(X,V),n=Object(i.a)(a,2),s=n[0],c=n[1];function l(e){c({type:"setMovieRecommendationsStatus",payload:"loading"}),(e=>{const t="".concat(C).concat(_,"?").concat(M).replace("{movie_id}",e);return fetch(t).then(e=>{if(!e.ok)throw Error(e.status);return e.json()})})(e).then(e=>{var t;c({type:"setMovieRecommendations",payload:(t=e.results,t.forEach(e=>{e.poster_url=e.poster_path?D.baseUrl+D.posterSize+e.poster_path:null,e.tmdbURI="https://www.themoviedb.org/movie/".concat(e.id)}),t)})}).catch(e=>{c({type:"setMovieRecommendationsStatus",payload:"error"}),console.log(e.message)})}Object(r.useEffect)(()=>{l(t)},[t]);const m=Object(r.useMemo)(()=>s,[s]);return o.a.createElement(J.Provider,{value:m},e)};var H=({backdrop_url:e,title:t})=>{const a={paddingTop:"".concat(300/533*100,"%")};return o.a.createElement("div",{className:"bg-secondary embed-responsive text-white",style:a},e?o.a.createElement("img",{alt:"Backdrop for ".concat(t),className:"embed-responsive-item",src:e}):o.a.createElement("div",{className:"embed-responsive-item text-center"},"No backdrop available for ".concat(t)))};var K=()=>{const e=Object(r.useContext)(z),t=e.movieCredits,a=e.movieCreditsStatus,n={overflowX:"scroll",WebkitOverflowScrolling:"touch"};return o.a.createElement(Y,{dataStatus:a,hasData:!!t.id},o.a.createElement("h2",{className:"h4"},"Cast",o.a.createElement(S.a,{className:"ml-1 small",icon:"external-link-alt"})),t.cast.length?o.a.createElement("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:n},t.cast.map(e=>o.a.createElement("li",{className:"col-auto mb-3",key:e.credit_id},o.a.createElement("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank"},e.name,o.a.createElement("div",{className:"small"},e.character))))):o.a.createElement("p",null,"No data available"),o.a.createElement("h2",{className:"h4"},"Crew",o.a.createElement(S.a,{className:"ml-1 small",icon:"external-link-alt"})),t.crew.length?o.a.createElement("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:n},t.crew.map(e=>o.a.createElement("li",{className:"col-auto mb-3",key:e.credit_id},o.a.createElement("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank"},e.name,o.a.createElement("div",{className:"small"},e.job))))):o.a.createElement("p",null,"No data available"))};var Q=({poster_url:e,title:t})=>{const a={paddingTop:"".concat(150,"%")};return o.a.createElement("div",{className:"bg-secondary embed-responsive text-white",style:a},e?o.a.createElement("img",{alt:"Poster for ".concat(t),className:"embed-responsive-item",src:e}):o.a.createElement("div",{className:"embed-responsive-item text-center"},"No poster available for ".concat(t)))};var Z=()=>{const e=Object(r.useContext)(J),t=e.movieRecommendations,a=e.movieRecommendationsStatus;return o.a.createElement(Y,{dataStatus:a,hasData:!!t.length},o.a.createElement("div",{className:"p-3"},o.a.createElement("h2",{className:"h4"},"Recommendations",o.a.createElement(S.a,{className:"ml-1 small",icon:"external-link-alt"})),o.a.createElement("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"}},t.map(e=>o.a.createElement("li",{className:"col-5 col-md-3 col-lg-2 mb-3",key:e.id},o.a.createElement("a",{className:"text-danger",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank"},o.a.createElement(Q,{poster_url:e.poster_url,title:e.title}),e.title))))))};var ee=()=>{const e=Object(r.useContext)(F).movieInfo;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-3"},o.a.createElement("div",{className:"animate__animated animate__fadeInUp mb-3 row"},o.a.createElement("div",{className:"col-6 col-lg-4"},o.a.createElement(Q,{poster_url:e.poster_url,title:e.title})),o.a.createElement("div",{className:"col-12 col-sm-6 col-lg-8 text-right"},o.a.createElement("div",{className:"lead text-left"},e.overview),o.a.createElement("div",{className:"mb-3"},o.a.createElement("span",{className:"badge badge-secondary ml-2"},e.original_language)),o.a.createElement("div",{className:"mb-3"},o.a.createElement("a",{className:"btn btn-danger btn-sm",href:e.LetterboxdURI,target:"_blank",rel:"noopener noreferrer"},"View movie at Letterboxd")),o.a.createElement("div",{className:"mb-3"},o.a.createElement("a",{className:"btn btn-danger btn-sm",href:e.tmdbURI,target:"_blank",rel:"noopener noreferrer"},"View movie at TMDB")))),o.a.createElement(q,{movieId:e.id},o.a.createElement(K,null))),o.a.createElement(H,{backdrop_url:e.backdrop_url,title:e.title}),o.a.createElement($,{movieId:e.id},o.a.createElement(Z,null)))};var te=()=>{const e=Object(r.useContext)(F).movieInfo;return o.a.createElement("div",{className:"bg-secondary p-3"},o.a.createElement("h1",{className:"h3"},e.title,o.a.createElement("span",{className:"font-italic ml-2 small"},"(".concat(e.release_year).concat(e.title!==e.original_title?', "'.concat(e.original_title,'"'):"",")"))),o.a.createElement("div",{className:"small"},e.Rating," of 5",o.a.createElement(S.a,{className:"mx-1 text-warning",icon:"star"}),o.a.createElement("span",{className:"small"},"by me")),o.a.createElement("div",{className:"small"},e.vote_average," of 10",o.a.createElement(S.a,{className:"mx-1 text-warning",icon:"star"}),o.a.createElement("span",{className:"small"},"by ".concat(e.vote_count," TMDb users"))))};var ae=()=>{const e=Object(r.useContext)(F),t=e.movieInfo,a=e.movieInfoStatus;return o.a.createElement(Y,{dataStatus:a,hasData:""!==t.id},o.a.createElement("div",{className:"border border-secondary mb-3 rounded"},o.a.createElement(te,null),o.a.createElement(ee,null)))};var re=({match:e})=>{const t=Object(r.useContext)(E),a=t.movieRatings,n=t.movieRatingsStatus,s=e.params.movieId,c=a.find(e=>e.Id===s);return o.a.createElement(Y,{dataStatus:n},o.a.createElement(T,{movie:c},o.a.createElement(ae,null)))};var oe=Object(r.memo)((function({movie:e,type:t}){let a;return"Diary"===t&&e.WatchedDateFormatted?a="watched in ".concat(e.WatchedDateFormatted):"Ratings"===t&&e.DateFormatted&&(a="rated in ".concat(e.DateFormatted)),o.a.createElement(c.b,{className:"btn btn-secondary btn-block",to:"/movie/".concat(e.Id)},o.a.createElement("div",{className:"text-left text-truncate"},e.Name,o.a.createElement("span",{className:"ml-1 small"},"(",e.Year,")")),o.a.createElement("div",{className:"align-items-end row small"},o.a.createElement("div",{className:"col text-left text-warning"},Array.from(Array(e.Rating)).map((e,t)=>o.a.createElement(S.a,{key:t,className:"mr-1",icon:"star"}))),o.a.createElement("div",{className:"col small text-right"},a)))}));const ne={dispatchMovie:null,dispatchMovieType:"",moviesFiltered:[],moviesPaginated:[],moviesStatus:null};function se(e,t){switch(t.type){case"setAll":return Object(v.a)(Object(v.a)({},e),t.payload);default:throw new Error}}var ce=Object(r.memo)((function({type:e}){const t=Object(r.useReducer)(se,ne),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useContext)(p),l=c.dispatchMovieDiary,m=c.movieDiaryFiltered,d=c.movieDiaryPage,v=c.movieDiaryPaginated,u=c.movieDiarySearchString,g=c.movieDiaryStatus,b=Object(r.useContext)(E),h=b.dispatchMovieRatings,y=b.movieRatingsFiltered,f=b.movieRatingsPage,w=b.movieRatingsPaginated,N=b.movieRatingsSearchString,S=b.movieRatingsStatus;return Object(r.useEffect)(()=>{let t;"Diary"===e?t={dispatchMovie:l,dispatchMovieType:"setMovieDiaryPage",moviesFiltered:m,moviesPaginated:v,moviesStatus:g}:"Ratings"===e&&(t={dispatchMovie:h,dispatchMovieType:"setMovieRatingsPage",moviesFiltered:y,moviesPaginated:w,moviesStatus:S}),s({type:"setAll",payload:t})},[l,h,m,d,v,u,g,y,f,w,N,S,e]),o.a.createElement(Y,{dataStatus:n.moviesStatus,hasData:!!n.moviesFiltered.length,messageNoData:"noMovies"},o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"list-unstyled"},n.moviesPaginated.map(t=>o.a.createElement("li",{className:"mb-3",key:t.Id},o.a.createElement(oe,{movie:t,type:e})))),n.moviesPaginated.length<n.moviesFiltered.length&&o.a.createElement("div",{className:"mb-3 text-center"},o.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:()=>n.dispatchMovie({type:n.dispatchMovieType})},"Show more"))))}));const ie={dispatchMovie:null,dispatchMovieType:"",movieSearchString:"",moviesFiltered:[]};function le(e,t){switch(t.type){case"setAll":return Object(v.a)(Object(v.a)({},e),t.payload);default:throw new Error}}var me=({type:e})=>{const t=Object(r.useReducer)(le,ie),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useContext)(p),l=c.dispatchMovieDiary,m=c.movieDiaryFiltered,d=c.movieDiarySearchString,v=c.movieDiaryStatus,u=Object(r.useContext)(E),g=u.dispatchMovieRatings,b=u.movieRatingsFiltered,h=u.movieRatingsSearchString,y=u.movieRatingsStatus;return Object(r.useEffect)(()=>{let t;"Diary"===e?t={dispatchMovie:l,dispatchMovieType:"setMovieDiarySearchString",movieSearchString:d,moviesFiltered:m}:"Ratings"===e&&(t={dispatchMovie:g,dispatchMovieType:"setMovieRatingsSearchString",movieSearchString:h,moviesFiltered:b}),s({type:"setAll",payload:t})},[l,g,m,d,v,b,h,y,e]),o.a.createElement("div",{className:"mb-3"},o.a.createElement("div",{className:"input-group mb-1"},o.a.createElement("input",{id:"search-movie",className:"form-control",placeholder:"Search...",type:"text",value:n.movieSearchString,onChange:e=>n.dispatchMovie({type:n.dispatchMovieType,payload:e.target.value})}),o.a.createElement("span",{className:"input-group-append"},o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:()=>n.dispatchMovie({type:n.dispatchMovieType,payload:""})},o.a.createElement(S.a,{icon:"times"})))),o.a.createElement("p",{className:"small text-right"},n.moviesFiltered.length," movies"))};var de=({type:e})=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"h4"},e),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-4"},o.a.createElement(me,{type:e})),o.a.createElement("div",{className:"col-12 col-sm-8"},o.a.createElement(ce,{type:e}))));var ve=()=>o.a.createElement(W,{type:"pageNotFound"});var ue=Object(r.memo)((function({width:e}){return o.a.createElement("div",{className:"bg-secondary overflow-hidden rounded"},o.a.createElement("div",{className:"animate__animated animate__slideInLeft bg-danger pb-2 rounded",style:{width:"".concat(e,"%")}}))}));const ge={moviesPerDecadeReleased:"Per decade released",moviesPerRatingGiven:"Per rating given",moviesPerYearWatched:"Per year watched"};var pe=Object(r.memo)((function({movies:e,moviesStatus:t,type:a}){return o.a.createElement("div",{className:"border border-secondary p-3 rounded"},o.a.createElement("h1",{className:"h5"},ge[a]),o.a.createElement(Y,{dataStatus:t,hasData:!!e.groups,messageNoData:"noStats"},o.a.createElement("ul",{className:"list-unstyled"},Object.entries(e.groups).reverse().map(([t,r])=>{const n=100*r/e.max;return o.a.createElement("li",{className:"mb-2",key:t},o.a.createElement("div",{className:"no-gutters row"},o.a.createElement("div",{className:"col-auto"},(()=>{if("moviesPerRatingGiven"===a){let e=[];for(let a=0;a<t;a++)e.push(o.a.createElement(S.a,{key:a,className:"mr-1 text-warning",icon:"star"}));return e}return t})()),o.a.createElement("div",{className:"col font-weight-bold text-right"},r)),o.a.createElement(ue,{width:n}))}))))}));var be=()=>{const e=Object(r.useContext)(p),t=e.moviesPerYearWatched,a=e.movieDiaryStatus,n=Object(r.useContext)(E),s=n.moviesPerDecadeReleased,c=n.moviesPerRatingGiven,i=n.movieRatingsStatus;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"h4"},"Stats"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 mb-3"},o.a.createElement(pe,{movies:t,moviesStatus:a,type:"moviesPerYearWatched"})),o.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 mb-3"},o.a.createElement(pe,{movies:c,moviesStatus:i,type:"moviesPerRatingGiven"})),o.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 mb-3"},o.a.createElement(pe,{movies:s,moviesStatus:i,type:"moviesPerDecadeReleased"}))))};var he=Object(r.memo)((function(){return o.a.createElement("div",{className:"border-secondary border-top pt-3 small text-center"},o.a.createElement("div",{className:"mb-3"},o.a.createElement("img",{alt:"Letterboxd",src:"https://a.ltrbxd.com/logos/letterboxd-logo-v-neg-rgb-1000px.png",height:"48"}),o.a.createElement("br",null),"My Ratings and Diary data are exported from Letterboxd from time to time.",o.a.createElement("br",null),"My",o.a.createElement("a",{className:"mx-1 text-danger",href:"https://letterboxd.com/saviomd",target:"_blank",rel:"noopener noreferrer"},"profile",o.a.createElement(S.a,{className:"ml-1 small",icon:"external-link-alt"})),"will have more up to date information."),o.a.createElement("div",{className:"mb-3"},o.a.createElement("img",{alt:"TMDb",src:D.attributionUrl,height:"48"}),o.a.createElement("br",null),"This product uses the TMDb API but is not endorsed or certified by TMDb."))}));a(34),a(35);m.b.add(d.a,d.b,d.c,d.d,d.e,d.f,d.g,d.h,d.i);const ye={navLinks:[{icon:"star",name:"Ratings",path:"/"},{icon:"calendar-alt",name:"Diary",path:"/diary"},{icon:"chart-bar",name:"Stats",path:"/stats"}]};var Ee=()=>{const e=Object(r.useState)(ye),t=Object(i.a)(e,1)[0];return o.a.createElement(y,null,o.a.createElement(N,null,o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"justify-content-center row"},o.a.createElement("div",{className:"col-12 col-md-10"},o.a.createElement(x,{navLinks:t.navLinks}),o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,render:()=>o.a.createElement(de,{type:"Ratings"})}),o.a.createElement(l.a,{path:"/diary",render:()=>o.a.createElement(de,{type:"Diary"})}),o.a.createElement(l.a,{path:"/movie/:movieId",render:({match:e})=>o.a.createElement(re,{match:e})}),o.a.createElement(l.a,{path:"/stats",component:be}),o.a.createElement(l.a,{component:ve})),o.a.createElement(he,null),o.a.createElement(R,null))))))};const fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}const Ne=o.a.createElement(c.a,null,o.a.createElement(Ee,null));s.a.render(Ne,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/movieratings",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/movieratings","/service-worker.js");fe?(!function(e,t){fetch(e).then(a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):we(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):we(t,e)})}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.e143f24a.chunk.js.map