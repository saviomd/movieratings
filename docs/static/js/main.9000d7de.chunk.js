(window.webpackJsonpmovieratings=window.webpackJsonpmovieratings||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},36:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),i=a.n(o),c=a(9),s=a(2),l=a(11),m=a(14),u=a(10),d=a(4);function v(e,t){return e.filter(function(e){return e.Name.toLowerCase().includes(t.toLowerCase())})}function p(e){return e.reverse(),e=e.map(function(e,t){return e.Id=e.LetterboxdURI.length?e.LetterboxdURI.split("/film/")[1].split("/")[0]:t.toString(),e.Name=e.Name.toString(),e.DateFormatted=new Date(e.Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),e.WatchedDate&&(e.WatchedDateFormatted=new Date(e.WatchedDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})),e})}var f=function(){return fetch("https://saviomd.com/movieratings/data/diary.json").then(function(e){if(!e.ok)throw Error(e.status);return e.json()})},b=function(){return fetch("https://saviomd.com/movieratings/data/ratings.json").then(function(e){if(!e.ok)throw Error(e.status);return e.json()})};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=n.a.createContext(),E={movieDiary:[],movieDiaryPage:1,movieDiarySearchString:"",movieDiaryStatus:""};function w(e,t){switch(t.type){case"setMovieDiary":return h({},e,{movieDiary:t.payload,movieDiaryStatus:"loaded"});case"setMovieDiaryPage":return h({},e,{movieDiaryPage:e.movieDiaryPage+1});case"setMovieDiarySearchString":return h({},e,{movieDiarySearchString:t.payload.trim().toLowerCase()});case"setMovieDiaryStatus":return h({},e,{movieDiaryStatus:t.payload});default:throw new Error}}var O=function(e){var t=e.children,a=Object(r.useReducer)(w,E),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(r.useMemo)(function(){return v(i.movieDiary,i.movieDiarySearchString)},[i.movieDiary,i.movieDiarySearchString]),m=Object(r.useMemo)(function(){var e=100*i.movieDiaryPage;return l.slice(0,e)},[l,i.movieDiaryPage]),u=Object(r.useMemo)(function(){var e=i.movieDiary.reduce(function(e,t){var a=t.WatchedDate.split("-")[0];return e[a]?e[a]++:e[a]=1,e},{}),t=0;for(var a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}},[i.movieDiary]);Object(r.useEffect)(function(){c({type:"setMovieDiaryStatus",payload:"loading"}),f().then(function(e){var t=p(e);return c({type:"setMovieDiary",payload:t}),t}).catch(function(e){c({type:"setMovieDiaryStatus",payload:"error"}),console.log(e.message)})},[]);var d=Object(r.useMemo)(function(){return h({},i,{dispatchMovieDiary:c,movieDiaryFiltered:l,movieDiaryPaginated:m,moviesPerYearWatched:u})},[l,m,u,i]);return n.a.createElement(y.Provider,{value:d},t)};function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N=n.a.createContext(),D={movieRatings:[],movieRatingsPage:1,movieRatingsSearchString:"",movieRatingsStatus:""};function P(e,t){switch(t.type){case"setMovieRatings":return S({},e,{movieRatings:t.payload,movieRatingsStatus:"loaded"});case"setMovieRatingsPage":return S({},e,{movieRatingsPage:e.movieRatingsPage+1});case"setMovieRatingsSearchString":return S({},e,{movieRatingsSearchString:t.payload.trim().toLowerCase()});case"setMovieRatingsStatus":return S({},e,{movieRatingsStatus:t.payload});default:throw new Error}}var R=function(e){var t=e.children,a=Object(r.useReducer)(P,D),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(r.useMemo)(function(){return v(i.movieRatings,i.movieRatingsSearchString)},[i.movieRatings,i.movieRatingsSearchString]),m=Object(r.useMemo)(function(){var e=100*i.movieRatingsPage;return l.slice(0,e)},[l,i.movieRatingsPage]),u=Object(r.useMemo)(function(){var e=i.movieRatings.reduce(function(e,t){var a="".concat(t.Year.toString().substr(0,3),"0");return e[a]?e[a]++:e[a]=1,e},{}),t=0;for(var a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}},[i.movieRatings]),d=Object(r.useMemo)(function(){var e=i.movieRatings.reduce(function(e,t){var a=t.Rating;return e[a]?e[a]++:e[a]=1,e},{}),t=0;for(var a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}},[i.movieRatings]);Object(r.useEffect)(function(){c({type:"setMovieRatingsStatus",payload:"loading"}),b().then(function(e){var t=p(e);return c({type:"setMovieRatings",payload:t}),t}).catch(function(e){c({type:"setMovieRatingsStatus",payload:"error"}),console.log(e.message)})},[]);var f=Object(r.useMemo)(function(){return S({},i,{dispatchMovieRatings:c,movieRatingsFiltered:l,movieRatingsPaginated:m,moviesPerDecadeReleased:u,moviesPerRatingGiven:d})},[l,m,u,d,i]);return n.a.createElement(N.Provider,{value:f},t)},M=Object(r.memo)(function(){var e=(new Date).getFullYear();return n.a.createElement("footer",{className:"border-secondary border-top mb-3 pt-3 small text-center"},"\xa9 2017-",e,n.a.createElement("a",{className:"ml-1 text-danger",href:"http://saviomd.com/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{alt:"saviomd.com",className:"mr-1",src:"https://saviomd.com/img/favicon.png",height:"15",width:"15"}),"S\xe1vio Mendes"))}),x=a(5),k=function(e){var t=e.link;return n.a.createElement(c.c,{to:t.path,exact:!0,activeClassName:"active",className:"btn btn-danger btn-sm"},n.a.createElement(x.a,{icon:t.icon}),n.a.createElement("span",{className:"d-none d-sm-inline-block ml-1"},t.name))},C=function(e){var t=e.navLinks;return n.a.createElement("nav",{className:"btn-group"},t.map(function(e){return n.a.createElement(k,{key:e.path,link:e})}))},I=function(e){var t=e.navLinks;return n.a.createElement("header",{className:"border-bottom border-secondary mb-3"},n.a.createElement("div",{className:"align-items-center my-2 row"},n.a.createElement("h1",{className:"col-auto h5 mb-0"},n.a.createElement(c.c,{to:"/",exact:!0,className:"text-white"},"Movie Ratings")),n.a.createElement("div",{className:"col text-right"},n.a.createElement(C,{navLinks:t}))))},_={img:{attributionUrl:"https://www.themoviedb.org/assets/1/v4/logos/408x161-powered-by-rectangle-green-bb4301c10ddc749b4e79463811a68afebeae66ef43d17bcfd8ff0e60ded7ce99.png",baseUrl:"https://image.tmdb.org/t/p/",backdropSize:"w1280",fallbackUrl:"https://www.themoviedb.org/assets/1/v4/logos/293x302-powered-by-square-blue-ee05c47ab249273a6f9f1dcafec63daba386ca30544567629deb1809395d8516.png",posterSize:"w780"},key:"api_key=6f875d4fba2e999f480afa6275a08f75",pathMovieCredits:"movie/{movie_id}/credits",pathMovieRecommendations:"movie/{movie_id}/recommendations",pathSearchMovies:"search/movie",url:"https://api.themoviedb.org/3/"},F=function(e){var t="".concat(_.url).concat(_.pathMovieCredits,"?").concat(_.key).replace("{movie_id}",e);return fetch(t).then(function(e){if(!e.ok)throw Error(e.status);return e.json()})},U=function(e){return fetch("".concat(_.url).concat(_.pathSearchMovies,"?").concat(_.key,"&query=").concat(e.Name,"&year=").concat(e.Year)).then(function(e){if(!e.ok)throw Error(e.status);return e.json()})},L=function(e){var t="".concat(_.url).concat(_.pathMovieRecommendations,"?").concat(_.key).replace("{movie_id}",e);return fetch(t).then(function(e){if(!e.ok)throw Error(e.status);return e.json()})};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var A=n.a.createContext(),Y={movieInfo:{backdrop_url:_.img.fallbackUrl,id:"",LetterboxdURI:"",overview:"",poster_url:_.img.fallbackUrl,Rating:"",title:"",vote_average:""},movieInfoStatus:""};function z(e,t){switch(t.type){case"setMovieInfo":return W({},e,{movieInfo:t.payload,movieInfoStatus:"loaded"});case"setMovieInfoStatus":return W({},e,{movieInfoStatus:t.payload});default:throw new Error}}var B=function(e){var t=e.children,a=e.movie,o=Object(r.useReducer)(z,Y),i=Object(s.a)(o,2),c=i[0],l=i[1];Object(r.useEffect)(function(){!function(e){void 0!==e&&(l({type:"setMovieInfoStatus",payload:"loading"}),U(e).then(function(t){if(!t.results.length)throw Error("No movie found");var a=t.results.find(function(t){return t.title===e.Name&&t.release_date.indexOf(e.Year)>-1});if(void 0===a)throw Error("No movie found");var r={backdrop_url:a.backdrop_path?_.img.baseUrl+_.img.backdropSize+a.backdrop_path:null,id:a.id,LetterboxdURI:e.LetterboxdURI,overview:a.overview,poster_url:a.poster_path?_.img.baseUrl+_.img.posterSize+a.poster_path:null,Rating:e.Rating,title:a.title,tmdbURI:"https://www.themoviedb.org/movie/".concat(a.id),vote_average:a.vote_average};l({type:"setMovieInfo",payload:r})}).catch(function(e){l({type:"setMovieInfoStatus",payload:"error"}),console.log(e.message)}))}(a)},[a]);var m=Object(r.useMemo)(function(){return c},[c]);return n.a.createElement(A.Provider,{value:m},t)},G=Object(r.memo)(function(e){var t=e.type,a={error:{icon:"sad-tear",text:"An error has ocurred"},loading:{icon:"hourglass-half",text:"Loading..."},noData:{icon:"frown",text:"No data to show"},noMovies:{icon:"frown",text:"No movies to show"},noStats:{icon:"frown",text:"No stats to show"},pageNotFound:{icon:"dizzy",text:"Page not found"}};return n.a.createElement("div",{className:"lead p-3 text-center"},n.a.createElement("div",{className:"h3 mb-3"},n.a.createElement("span",{className:"bg-secondary p-2 rounded"},n.a.createElement(x.a,{icon:a[t].icon}))),a[t].text)}),q=Object(r.memo)(function(e){var t=e.children,a=e.dataStatus,r=e.hasData,o=e.messageNoData;return n.a.createElement(n.a.Fragment,null,"loaded"===a&&r&&n.a.createElement(n.a.Fragment,null,t),"loaded"===a&&!r&&n.a.createElement(G,{type:o}),("loading"===a||"error"===a)&&n.a.createElement(G,{type:a}))});q.defaultProps={dataStatus:"",hasData:!0,messageNoData:"noData"};var J=q;function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $=n.a.createContext(),H={movieCredits:{cast:[],crew:[],id:""},movieCreditsStatus:""};function K(e,t){switch(t.type){case"setMovieCredits":return X({},e,{movieCredits:t.payload,movieCreditsStatus:"loaded"});case"setMovieCreditsStatus":return X({},e,{movieCreditsStatus:t.payload});default:throw new Error}}var Q=function(e){var t=e.children,a=e.movieId,o=Object(r.useReducer)(K,H),i=Object(s.a)(o,2),c=i[0],l=i[1];Object(r.useEffect)(function(){!function(e){l({type:"setMovieCreditsStatus",payload:"loading"}),F(e).then(function(e){e.cast.forEach(function(e){e.tmdbURI="https://www.themoviedb.org/person/".concat(e.id)}),e.crew.forEach(function(e){e.tmdbURI="https://www.themoviedb.org/person/".concat(e.id)}),l({type:"setMovieCredits",payload:e})}).catch(function(e){l({type:"setMovieCreditsStatus",payload:"error"}),console.log(e.message)})}(a)},[a]);var m=Object(r.useMemo)(function(){return c},[c]);return n.a.createElement($.Provider,{value:m},t)};function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var te=n.a.createContext(),ae={movieRecommendations:[],movieRecommendationsStatus:""};function re(e,t){switch(t.type){case"setMovieRecommendations":return ee({},e,{movieRecommendations:t.payload,movieRecommendationsStatus:"loaded"});case"setMovieRecommendationsStatus":return ee({},e,{movieRecommendationsStatus:t.payload});default:throw new Error}}var ne=function(e){var t=e.children,a=e.movieId,o=Object(r.useReducer)(re,ae),i=Object(s.a)(o,2),c=i[0],l=i[1];Object(r.useEffect)(function(){!function(e){l({type:"setMovieRecommendationsStatus",payload:"loading"}),L(e).then(function(e){e.results.forEach(function(e){e.poster_url=e.poster_path?_.img.baseUrl+_.img.posterSize+e.poster_path:null,e.tmdbURI="https://www.themoviedb.org/movie/".concat(e.id)}),l({type:"setMovieRecommendations",payload:e.results})}).catch(function(e){l({type:"setMovieRecommendationsStatus",payload:"error"}),console.log(e.message)})}(a)},[a]);var m=Object(r.useMemo)(function(){return c},[c]);return n.a.createElement(te.Provider,{value:m},t)},oe=function(e){var t=e.backdrop_url,a=e.title,r={paddingTop:"".concat(300/533*100,"%")};return n.a.createElement("div",{className:"bg-secondary embed-responsive text-white",style:r},t?n.a.createElement("img",{alt:"Backdrop for ".concat(a),className:"embed-responsive-item",src:t}):n.a.createElement("div",{className:"embed-responsive-item text-center"},"No backdrop available for ".concat(a)))},ie=function(){var e=Object(r.useContext)($),t=e.movieCredits,a=e.movieCreditsStatus,o={overflowX:"scroll",WebkitOverflowScrolling:"touch"};return n.a.createElement(J,{dataStatus:a,hasData:!!t.id},n.a.createElement("h2",{className:"h4"},"Cast"),t.cast.length?n.a.createElement("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:o},t.cast.map(function(e){return n.a.createElement("li",{className:"col-auto mb-3",key:e.credit_id},n.a.createElement("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank"},e.name,n.a.createElement("div",{className:"small"},e.character)))})):n.a.createElement("p",null,"No data available"),n.a.createElement("h2",{className:"h4"},"Crew"),t.crew.length?n.a.createElement("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:o},t.crew.map(function(e){return n.a.createElement("li",{className:"col-auto mb-3",key:e.credit_id},n.a.createElement("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank"},e.name,n.a.createElement("div",{className:"small"},e.job)))})):n.a.createElement("p",null,"No data available"))},ce=function(e){var t=e.poster_url,a=e.title,r={paddingTop:"".concat(150,"%")};return n.a.createElement("div",{className:"bg-secondary embed-responsive text-white",style:r},t?n.a.createElement("img",{alt:"Poster for ".concat(a),className:"embed-responsive-item",src:t}):n.a.createElement("div",{className:"embed-responsive-item text-center"},"No poster available for ".concat(a)))},se=function(){var e=Object(r.useContext)(te),t=e.movieRecommendations,a=e.movieRecommendationsStatus;return n.a.createElement(J,{dataStatus:a,hasData:!!t.length},n.a.createElement("div",{className:"p-3"},n.a.createElement("h2",{className:"h4"},"Recommendations"),n.a.createElement("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"}},t.map(function(e){return n.a.createElement("li",{className:"col-5 col-md-3 col-lg-2 mb-3",key:e.id},n.a.createElement("a",{className:"text-danger",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank"},n.a.createElement(ce,{poster_url:e.poster_url,title:e.title}),e.title))}))))},le=function(){var e=Object(r.useContext)(A).movieInfo;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-3"},n.a.createElement("p",{className:"lead"},e.overview),n.a.createElement(Q,{movieId:e.id},n.a.createElement(ie,null)),n.a.createElement("div",{className:"text-right"},n.a.createElement("div",{className:"mb-3"},n.a.createElement("a",{className:"btn btn-danger btn-sm",href:e.LetterboxdURI,target:"_blank",rel:"noopener noreferrer"},"View movie at Letterboxd")),n.a.createElement("div",{className:"mb-3"},n.a.createElement("a",{className:"btn btn-danger btn-sm",href:e.tmdbURI,target:"_blank",rel:"noopener noreferrer"},"View movie at TMDB")))),n.a.createElement(oe,{backdrop_url:e.backdrop_url,title:e.title}),n.a.createElement(ne,{movieId:e.id},n.a.createElement(se,null)))},me=function(){var e=Object(r.useContext)(A).movieInfo;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-3 row"},n.a.createElement("div",{className:"col-6 col-md-4 col-lg-3"},n.a.createElement(ce,{poster_url:e.poster_url,title:e.title})),n.a.createElement("div",{className:"col text-right"},n.a.createElement("div",{className:"mb-3"},e.Rating," of 5",n.a.createElement(x.a,{className:"ml-1 text-warning",icon:"star"}),n.a.createElement("div",{className:"small"},"by me")),n.a.createElement("div",{className:"mb-3"},e.vote_average," of 10",n.a.createElement(x.a,{className:"ml-1 text-warning",icon:"star"}),n.a.createElement("div",{className:"small"},"by TMDb users")))),n.a.createElement("h1",{className:"bg-secondary h3 mb-0 p-3"},e.title))},ue=function(){var e=Object(r.useContext)(A),t=e.movieInfo,a=e.movieInfoStatus;return n.a.createElement(J,{dataStatus:a,hasData:""!==t.id},n.a.createElement("div",{className:"border border-secondary mb-3 rounded"},n.a.createElement(me,null),n.a.createElement(le,null)))},de=function(e){var t=e.match,a=Object(r.useContext)(N),o=a.movieRatings,i=a.movieRatingsStatus,c=t.params.movieId,s=o.find(function(e){return e.Id===c});return n.a.createElement(J,{dataStatus:i},n.a.createElement(B,{movie:s},n.a.createElement(ue,null)))},ve=Object(r.memo)(function(e){var t,a=e.movie,r=e.type;return"Diary"===r&&a.WatchedDateFormatted?t="watched in ".concat(a.WatchedDateFormatted):"Ratings"===r&&a.DateFormatted&&(t="rated in ".concat(a.DateFormatted)),n.a.createElement(c.b,{className:"btn btn-secondary btn-block",to:"/movie/".concat(a.Id)},n.a.createElement("div",{className:"text-left text-truncate"},a.Name,n.a.createElement("span",{className:"ml-1 small"},"(",a.Year,")")),n.a.createElement("div",{className:"align-items-end row small"},n.a.createElement("div",{className:"col text-left text-warning"},Array.from(Array(a.Rating)).map(function(e,t){return n.a.createElement(x.a,{key:t,className:"mr-1",icon:"star"})})),n.a.createElement("div",{className:"col small text-right"},t)))});function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var fe={dispatchMovie:null,dispatchMovieType:"",moviesFiltered:[],moviesPaginated:[],moviesStatus:null};function be(e,t){switch(t.type){case"setAll":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{},t.payload);default:throw new Error}}var ge=Object(r.memo)(function(e){var t=e.type,a=Object(r.useReducer)(be,fe),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(r.useContext)(y),m=l.dispatchMovieDiary,u=l.movieDiaryFiltered,d=l.movieDiaryPage,v=l.movieDiaryPaginated,p=l.movieDiarySearchString,f=l.movieDiaryStatus,b=Object(r.useContext)(N),g=b.dispatchMovieRatings,h=b.movieRatingsFiltered,E=b.movieRatingsPage,w=b.movieRatingsPaginated,O=b.movieRatingsSearchString,j=b.movieRatingsStatus;return Object(r.useEffect)(function(){var e;"Diary"===t?e={dispatchMovie:m,dispatchMovieType:"setMovieDiaryPage",moviesFiltered:u,moviesPaginated:v,moviesStatus:f}:"Ratings"===t&&(e={dispatchMovie:g,dispatchMovieType:"setMovieRatingsPage",moviesFiltered:h,moviesPaginated:w,moviesStatus:j}),c({type:"setAll",payload:e})},[m,g,u,d,v,p,f,h,E,w,O,j,t]),n.a.createElement(J,{dataStatus:i.moviesStatus,hasData:!!i.moviesFiltered.length,messageNoData:"noMovies"},n.a.createElement(n.a.Fragment,null,n.a.createElement("ul",{className:"list-unstyled"},i.moviesPaginated.map(function(e){return n.a.createElement("li",{className:"mb-3",key:e.Id},n.a.createElement(ve,{movie:e,type:t}))})),i.moviesPaginated.length<i.moviesFiltered.length&&n.a.createElement("div",{className:"mb-3 text-center"},n.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){return i.dispatchMovie({type:i.dispatchMovieType})}},"Show more"))))});function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var ye={dispatchMovie:null,dispatchMovieType:"",movieSearchString:"",moviesFiltered:[]};function Ee(e,t){switch(t.type){case"setAll":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{},t.payload);default:throw new Error}}var we=function(e){var t=e.type,a=Object(r.useReducer)(Ee,ye),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(r.useContext)(y),m=l.dispatchMovieDiary,u=l.movieDiaryFiltered,d=l.movieDiarySearchString,v=l.movieDiaryStatus,p=Object(r.useContext)(N),f=p.dispatchMovieRatings,b=p.movieRatingsFiltered,g=p.movieRatingsSearchString,h=p.movieRatingsStatus;return Object(r.useEffect)(function(){var e;"Diary"===t?e={dispatchMovie:m,dispatchMovieType:"setMovieDiarySearchString",movieSearchString:d,moviesFiltered:u}:"Ratings"===t&&(e={dispatchMovie:f,dispatchMovieType:"setMovieRatingsSearchString",movieSearchString:g,moviesFiltered:b}),c({type:"setAll",payload:e})},[m,f,u,d,v,b,g,h,t]),n.a.createElement("div",{className:"mb-3"},n.a.createElement("div",{className:"input-group mb-1"},n.a.createElement("input",{id:"search-movie",className:"form-control",placeholder:"Search...",type:"text",value:i.movieSearchString,onChange:function(e){return i.dispatchMovie({type:i.dispatchMovieType,payload:e.target.value})}}),n.a.createElement("span",{className:"input-group-append"},n.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return i.dispatchMovie({type:i.dispatchMovieType,payload:""})}},n.a.createElement(x.a,{icon:"times"})))),n.a.createElement("p",{className:"small text-right"},i.moviesFiltered.length," movies"))},Oe=function(e){var t=e.type;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"h4"},t),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 col-sm-4"},n.a.createElement(we,{type:t})),n.a.createElement("div",{className:"col-12 col-sm-8"},n.a.createElement(ge,{type:t}))))},je=function(){return n.a.createElement(G,{type:"pageNotFound"})},Se=Object(r.memo)(function(e){var t=e.width;return n.a.createElement("div",{className:"bg-secondary rounded"},n.a.createElement("div",{className:"bg-danger pb-2 rounded",style:{width:"".concat(t,"%")}}))}),Ne=Object(r.memo)(function(e){var t=e.movies,a=e.moviesStatus,r=e.type;return n.a.createElement(J,{dataStatus:a,hasData:!!t.groups,messageNoData:"noStats"},n.a.createElement("ul",{className:"list-unstyled"},Object.entries(t.groups).reverse().map(function(e){var a=Object(s.a)(e,2),o=a[0],i=a[1],c=100*i/t.max;return n.a.createElement("li",{className:"mb-2",key:o},n.a.createElement("div",{className:"no-gutters row"},n.a.createElement("div",{className:"col-auto"},function(){if("moviesPerRatingGiven"===r){for(var e=[],t=0;t<o;t++)e.push(n.a.createElement(x.a,{key:t,className:"mr-1 text-warning",icon:"star"}));return e}return o}()),n.a.createElement("div",{className:"col font-weight-bold text-right"},i)),n.a.createElement(Se,{width:c}))})))}),De=function(){var e=Object(r.useContext)(y),t=e.moviesPerYearWatched,a=e.movieDiaryStatus,o=Object(r.useContext)(N),i=o.moviesPerDecadeReleased,c=o.moviesPerRatingGiven,s=o.movieRatingsStatus;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"h4"},"Stats"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 mb-3"},n.a.createElement("div",{className:"border border-secondary p-3 rounded"},n.a.createElement("h1",{className:"h5"},"Per year watched"),n.a.createElement(Ne,{movies:t,moviesStatus:a,type:"moviesPerYearWatched"}))),n.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 mb-3"},n.a.createElement("div",{className:"border border-secondary p-3 rounded"},n.a.createElement("h1",{className:"h5"},"Per rating given"),n.a.createElement(Ne,{movies:c,moviesStatus:s,type:"moviesPerRatingGiven"}))),n.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 mb-3"},n.a.createElement("div",{className:"border border-secondary p-3 rounded"},n.a.createElement("h1",{className:"h5"},"Per decade released"),n.a.createElement(Ne,{movies:i,moviesStatus:s,type:"moviesPerDecadeReleased"})))))},Pe=Object(r.memo)(function(){return n.a.createElement("div",{className:"border-secondary border-top pt-3 small text-center"},n.a.createElement("div",{className:"mb-3"},"My Ratings and Diary data are exported from Letterboxd from time to time.",n.a.createElement("br",null),"So my ",n.a.createElement("a",{className:"text-danger",href:"https://letterboxd.com/saviomd",target:"_blank",rel:"noopener noreferrer"},"profile")," will have more up to date information."),n.a.createElement("div",{className:"mb-3"},n.a.createElement("img",{alt:"Powered by TMDB",src:_.img.attributionUrl,height:"38"}),n.a.createElement("br",null),"This product uses the TMDb API but is not endorsed or certified by TMDb."))});a(35);m.b.add(u.a,u.b,u.c,u.d,u.e,u.f,u.g,u.h);var Re={navLinks:[{icon:"star",name:"Ratings",path:"/"},{icon:"calendar-alt",name:"Diary",path:"/diary"},{icon:"chart-bar",name:"Stats",path:"/stats"}]},Me=function(){var e=Object(r.useState)(Re),t=Object(s.a)(e,1)[0];return n.a.createElement(O,null,n.a.createElement(R,null,n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{className:"justify-content-center row"},n.a.createElement("div",{className:"col-12 col-md-10"},n.a.createElement(I,{navLinks:t.navLinks}),n.a.createElement(l.c,null,n.a.createElement(l.a,{path:"/",exact:!0,render:function(){return n.a.createElement(Oe,{type:"Ratings"})}}),n.a.createElement(l.a,{path:"/diary",render:function(){return n.a.createElement(Oe,{type:"Diary"})}}),n.a.createElement(l.a,{path:"/movie/:movieId",render:function(e){var t=e.match;return n.a.createElement(de,{match:t})}}),n.a.createElement(l.a,{path:"/stats",component:De}),n.a.createElement(l.a,{component:je})),n.a.createElement(Pe,null),n.a.createElement(M,null))))))},xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ke(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ce=n.a.createElement(c.a,null,n.a.createElement(Me,null));i.a.render(Ce,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/movieratings",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/movieratings","/service-worker.js");xe?(!function(e,t){fetch(e).then(function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ke(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ke(t,e)})}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.9000d7de.chunk.js.map