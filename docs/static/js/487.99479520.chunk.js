"use strict";(self.webpackChunkmovieratings=self.webpackChunkmovieratings||[]).push([[487],{545:function(e,t,r){r.d(t,{Z:function(){return n}});r(791);var a=r(184);var n=function(e){var t=e.children;return(0,a.jsx)("ul",{className:"flex-nowrap g-3 list-unstyled row",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t})}},487:function(e,t,r){r.r(t),r.d(t,{default:function(){return K}});var a=r(907);var n=r(181);function i(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,n.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=r(791),o=r(871),l=r(82),c=function(e){var t=e.path,r=e.queryString,a=void 0===r?"":r,n=l.Z.url,i=l.Z.key;return fetch("".concat(n).concat(t,"?api_key=").concat(i).concat(a)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))},d=l.Z.methods,u=d.movieDetails,m=d.searchMovies,v=r(885),h=r(683),f=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),p=function(e){var t=e.value;return t?"US".concat(f.format(t)):"--"},x=r(997),b=function(e){var t=e.credits;return(0,h.Z)((0,h.Z)({},t),{},{cast:null===t||void 0===t?void 0:t.cast.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})})),crew:null===t||void 0===t?void 0:t.crew.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})}))})},j=l.Z.img.poster,g=function(e){return e.movies.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{poster_url:j({path:e.poster_path}),tmdbURI:"https://www.themoviedb.org/movie/".concat(e.id)})}))},N=l.Z.img,_=N.backdrop,y=N.poster,w=function(e){var t=e.movie,r=e.movieDetails;return(0,h.Z)((0,h.Z)({},r),{},{backdrop_url:_({path:r.backdrop_path}),budget:p({value:r.budget}),credits:b({credits:r.credits}),LetterboxdURI:t.LetterboxdURI,original_language:r.original_language.toUpperCase(),poster_url:y({path:r.poster_path}),Rating:t.Rating,recommendations:g({movies:r.recommendations.results}),release_date:(0,x.Z)({date:r.release_date}),release_year:r.release_date.split("-")[0],revenue:p({value:r.revenue}),tmdbURI:"https://www.themoviedb.org/movie/".concat(r.id)})},D={movieDetails:{},movieDetailsStatus:""};function S(e,t){var r=t.payload;switch(t.type){case"SET_MOVIE_DETAILS":var a=r.movie,n=r.movieDetails;return(0,h.Z)((0,h.Z)({},e),{},{movieDetails:w({movie:a,movieDetails:n}),movieDetailsStatus:"loaded"});case"SET_MOVIE_DETAILS_STATUS":return(0,h.Z)((0,h.Z)({},e),{},{movieDetailsStatus:r});default:throw new Error}}var Z=function(){var e=(0,s.useReducer)(S,D),t=(0,v.Z)(e,2),r=t[0],a=t[1],n=(0,s.useMemo)((function(){return{setMovieDetails:function(e){return a({type:"SET_MOVIE_DETAILS",payload:e})},setMovieDetailsStatus:function(e){return a({type:"SET_MOVIE_DETAILS_STATUS",payload:e})}}}),[]);return(0,h.Z)((0,h.Z)({},r),{},{boundActions:n})},I=r(184),k=(0,s.createContext)(),R=function(){return(0,s.useContext)(k)};function U(e){var t=e.children,r=e.movie,a=Z(),n=(0,s.useCallback)((function(){if(void 0!==r){var e=r.Name,t=r.Year;a.boundActions.setMovieDetailsStatus("loading"),function(e){var t=e.Name,r=e.Year;return c({path:m(),queryString:"&query=".concat(t,"&year=").concat(r)})}({Name:e,Year:t}).then((function(n){if(!n.results.length)throw Error("No movie found");var i=n.results.find((function(r){return r.title===e&&r.release_date.indexOf(t)>-1}));if(void 0===i)throw Error("No movie found");(function(e){var t=e.movieId;return c({path:u({movieId:t}),queryString:"&append_to_response=credits,recommendations"})})({movieId:i.id}).then((function(e){a.boundActions.setMovieDetails({movie:r,movieDetails:e})}))})).catch((function(){a.boundActions.setMovieDetailsStatus("error")}))}else a.boundActions.setMovieDetailsStatus("error")}),[r,a.boundActions]);return(0,s.useEffect)((function(){n()}),[n]),(0,I.jsx)(k.Provider,{value:a,children:t})}U.defaultProps={movie:void 0};var E=r(423),A=r(301),T=r(548),M=r(363);function C(e){var t=e.src,r=e.title,a=e.type,n={backdrop:{height:300,width:533},poster:{height:450,width:300}}[a],i={paddingTop:"".concat(n.height/n.width*100,"%")};return(0,I.jsx)("div",{className:"bg-secondary ratio text-white",style:i,children:t?(0,I.jsx)("img",{alt:"".concat(a," for ").concat(r),loading:"lazy",src:t}):(0,I.jsx)("div",{className:"p-3 text-center",children:"No ".concat(a," available for ").concat(r)})})}C.defaultProps={src:null};var L=C,G=r(545);var O=function(){var e=R().movieDetails;return e.credits?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("h2",{className:"h4",children:["Cast",(0,I.jsx)(M.G,{className:"ms-1 small",icon:"external-link-alt"})]}),e.credits.cast.length?(0,I.jsx)(G.Z,{children:e.credits.cast.map((function(e){return(0,I.jsx)("li",{className:"col-auto",children:(0,I.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,(0,I.jsx)("div",{className:"small",children:e.character})]})},e.credit_id)}))}):(0,I.jsx)("p",{children:"No data available"}),(0,I.jsxs)("h2",{className:"h4",children:["Crew",(0,I.jsx)(M.G,{className:"ms-1 small",icon:"external-link-alt"})]}),e.credits.crew.length?(0,I.jsx)(G.Z,{children:e.credits.crew.map((function(e){return(0,I.jsx)("li",{className:"col-auto",children:(0,I.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,(0,I.jsx)("div",{className:"small",children:e.job})]})},e.credit_id)}))}):(0,I.jsx)("p",{children:"No data available"})]}):null},q=O,P=r(889);var V=function(){var e=R().movieDetails;return e.recommendations.length?(0,I.jsxs)("div",{className:"p-3",children:[(0,I.jsxs)("h2",{className:"h4",children:["Recommendations",(0,I.jsx)(M.G,{className:"ms-1 small",icon:"external-link-alt"})]}),(0,I.jsx)(G.Z,{children:e.recommendations.map((function(e){return(0,I.jsx)("li",{className:"col-5 col-md-3 col-lg-2",children:(0,I.jsxs)(P.Z,{href:e.tmdbURI,target:"_blank",children:[(0,I.jsx)(L,{src:e.poster_url,title:e.title,type:"poster"}),e.title]})},e.id)}))})]}):null},F=V;var Y=function(){var e=R().movieDetails,t=e.runtime,r=e.release_date,a=e.genres,n=e.budget,i=e.revenue,s=e.production_companies,o=e.production_countries,l=e.spoken_languages,c=[{title:"Runtime",value:"".concat(t," minutes")},{title:"Release date",value:r},{title:"Genres",value:a.map((function(e){return e.name}))},{title:"Budget",value:n},{title:"Revenue",value:i},{title:"Production companies",value:s.map((function(e){return e.name}))},{title:"Production countries",value:o.map((function(e){return e.name}))},{title:"Spoken languages",value:l.map((function(e){return e.english_name}))}];return(0,I.jsx)(G.Z,{children:c.map((function(e){var t=e.title,r=e.value;return(0,I.jsxs)("li",{className:"col-auto",children:[(0,I.jsx)("div",{children:t}),Array.isArray(r)?(0,I.jsx)("ul",{className:"fw-bold list-unstyled mb-0",children:r.map((function(e){return(0,I.jsx)("li",{children:(0,I.jsx)("span",{className:"badge bg-secondary",children:e})},e)}))}):(0,I.jsx)("div",{className:"fw-bold",children:r})]},t)}))})};var z=function(){var e=R().movieDetails;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"p-3",children:[(0,I.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[(0,I.jsx)("div",{className:"col-6 col-lg-4",children:(0,I.jsx)(L,{src:e.poster_url,title:e.title,type:"poster"})}),(0,I.jsx)("div",{className:"col-12 col-sm-6 col-lg-8 lead",children:e.overview})]}),(0,I.jsx)(Y,{}),(0,I.jsx)(q,{}),e.tagline&&(0,I.jsx)("blockquote",{className:"blockquote px-5 text-center",children:'"'.concat(e.tagline,'"')})]}),(0,I.jsx)(L,{src:e.backdrop_url,title:e.title,type:"backdrop"}),(0,I.jsxs)("div",{className:"p-3 text-end",children:[(0,I.jsxs)("div",{children:["View movie at",(0,I.jsx)(M.G,{className:"ms-1 small",icon:"external-link-alt"})]}),(0,I.jsx)("ul",{className:"list-inline",children:[{href:"LetterboxdURI",name:"Letterboxd"},{href:"tmdbURI",name:"TMDb"}].map((function(t){var r=t.href,a=t.name;return(0,I.jsx)("li",{className:"list-inline-item",children:(0,I.jsx)("a",{className:"btn btn-danger btn-sm",href:e[r],target:"_blank",rel:"noopener noreferrer",children:a})},a)}))})]}),(0,I.jsx)(F,{})]})},B=z;var W=function(){var e=R().movieDetails;return(0,I.jsxs)("div",{className:"bg-secondary p-3",children:[(0,I.jsxs)("h1",{className:"h3",children:[e.title,(0,I.jsxs)("span",{className:"font-italic ms-2 small",children:["(".concat(e.release_year),e.title!==e.original_title&&', "'.concat(e.original_title,'"'),")"]})]}),(0,I.jsxs)("div",{className:"small",children:[e.Rating," of 5",(0,I.jsx)(M.G,{className:"mx-1 text-warning",icon:"star"}),(0,I.jsx)("span",{className:"small",children:"by me"})]}),(0,I.jsxs)("div",{className:"small",children:[e.vote_average," of 10",(0,I.jsx)(M.G,{className:"mx-1 text-warning",icon:"star"}),(0,I.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})},X=W;var H=function(){var e=R(),t=e.movieDetails,r=e.movieDetailsStatus;return(0,I.jsx)(T.Z,{dataStatus:r,hasData:""!==t.id,children:(0,I.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[(0,I.jsx)(X,{}),(0,I.jsx)(B,{})]})})},J=H;var K=function(){var e=(0,E.a)().movieDiary,t=(0,A.D)().movieRatings,r=(0,o.UO)().movieId,a=[].concat(i(e),i(t)).find((function(e){return e.Id===r}));return(0,I.jsx)(U,{movie:a,children:(0,I.jsx)(J,{})})}}}]);
//# sourceMappingURL=487.99479520.chunk.js.map