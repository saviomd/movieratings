"use strict";(self.webpackChunkmovieratings=self.webpackChunkmovieratings||[]).push([[323],{545:function(e,t,r){r.d(t,{Z:function(){return a}});r(791);var n=r(184);var a=function(e){var t=e.children;return(0,n.jsx)("ul",{className:"flex-nowrap g-3 list-unstyled row",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t})}},323:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var n=r(907);var a=r(181);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=r(791),o=r(871),l=r(82),c=function(e){var t=e.path,r=e.queryString,n=void 0===r?"":r,a=l.Z.url,i=l.Z.key;return fetch("".concat(a).concat(t,"?api_key=").concat(i).concat(n)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))},u=l.Z.methods,d=u.movieDetails,m=u.searchMovies,v=r(885),h=r(683),p=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),f=function(e){var t=e.value;return t?"US".concat(p.format(t)):"--"},x=r(997),b=l.Z.img.profile,j=function(e){var t=e.person;return(0,h.Z)((0,h.Z)((0,h.Z)({},t),t.job&&{job:[t.job]}),{},{profile_url:b({path:t.profile_path}),tmdbURI:"https://www.themoviedb.org/person/".concat(t.id)})},g=function(e){var t=e.credits;return(0,h.Z)((0,h.Z)({},t),{},{cast:null===t||void 0===t?void 0:t.cast.map((function(e){return j({person:e})})).sort((function(e,t){return e.order-t.order})),crew:null===t||void 0===t?void 0:t.crew.reduce((function(e,t){var r=e.find((function(e){return e.id===t.id}));return r?(r.job=[].concat(i(r.job),[t.job]),e):[].concat(i(e),[j({person:t})])}),[]).sort((function(e,t){return t.popularity-e.popularity}))})},_=l.Z.img.poster,y=function(e){return e.movies.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{poster_url:_({path:e.poster_path}),tmdbURI:"https://www.themoviedb.org/movie/".concat(e.id)})}))},N=l.Z.img,w=N.backdrop,D=N.poster,S=function(e){var t=e.movie,r=e.movieDetails;return(0,h.Z)((0,h.Z)({},r),{},{backdrop_url:w({path:r.backdrop_path}),budget:f({value:r.budget}),credits:g({credits:r.credits}),LetterboxdURI:t.LetterboxdURI,original_language:r.original_language.toUpperCase(),poster_url:D({path:r.poster_path}),Rating:t.Rating,recommendations:y({movies:r.recommendations.results}),release_date:(0,x.Z)({date:r.release_date}),release_year:r.release_date.split("-")[0],revenue:f({value:r.revenue}),tmdbURI:"https://www.themoviedb.org/movie/".concat(r.id)})},Z={movieDetails:{},movieDetailsStatus:""};function I(e,t){var r=t.payload;switch(t.type){case"SET_MOVIE_DETAILS":var n=r.movie,a=r.movieDetails;return(0,h.Z)((0,h.Z)({},e),{},{movieDetails:S({movie:n,movieDetails:a}),movieDetailsStatus:"loaded"});case"SET_MOVIE_DETAILS_STATUS":return(0,h.Z)((0,h.Z)({},e),{},{movieDetailsStatus:r});default:throw new Error}}var k=function(){var e=(0,s.useReducer)(I,Z),t=(0,v.Z)(e,2),r=t[0],n=t[1],a=(0,s.useMemo)((function(){return{setMovieDetails:function(e){return n({type:"SET_MOVIE_DETAILS",payload:e})},setMovieDetailsStatus:function(e){return n({type:"SET_MOVIE_DETAILS_STATUS",payload:e})}}}),[]);return(0,h.Z)((0,h.Z)({},r),{},{boundActions:a})},E=r(184),R=(0,s.createContext)(),U=function(){return(0,s.useContext)(R)};function A(e){var t=e.children,r=e.movie,n=k(),a=(0,s.useCallback)((function(){if(void 0!==r){var e=r.Name,t=r.Year;n.boundActions.setMovieDetailsStatus("loading"),function(e){var t=e.Name,r=e.Year;return c({path:m(),queryString:"&query=".concat(t,"&year=").concat(r)})}({Name:e,Year:t}).then((function(a){if(!a.results.length)throw Error("No movie found");var i=a.results.find((function(r){return r.title===e&&r.release_date.indexOf(t)>-1}));if(void 0===i)throw Error("No movie found");(function(e){var t=e.movieId;return c({path:d({movieId:t}),queryString:"&append_to_response=credits,recommendations"})})({movieId:i.id}).then((function(e){n.boundActions.setMovieDetails({movie:r,movieDetails:e})}))})).catch((function(){n.boundActions.setMovieDetailsStatus("error")}))}else n.boundActions.setMovieDetailsStatus("error")}),[r,n.boundActions]);return(0,s.useEffect)((function(){a()}),[a]),(0,E.jsx)(R.Provider,{value:n,children:t})}A.defaultProps={movie:void 0};var T=r(423),M=r(301),L=r(548),C=r(363);function O(e){var t=e.src,r=e.title,n=e.type,a={backdrop:{height:300,width:533},poster:{height:450,width:300},profile:{height:278,width:185}}[n],i={paddingTop:"".concat(a.height/a.width*100,"%")};return(0,E.jsx)("div",{className:"bg-secondary ratio text-white",style:i,children:t?(0,E.jsx)("img",{alt:"".concat(n," for ").concat(r),loading:"lazy",src:t}):(0,E.jsx)("div",{className:"p-3 small text-center",children:"No ".concat(n," image available for ").concat(r)})})}O.defaultProps={src:null};var q=O,G=r(889),P=r(545);var V=function(){var e=U().movieDetails;return e.credits?["cast","crew"].map((function(t){return(0,E.jsxs)(s.Fragment,{children:[(0,E.jsxs)("h2",{className:"h4",children:["".concat(t[0].toUpperCase()).concat(t.slice(1)),(0,E.jsx)(C.G,{className:"ms-1 small",icon:"external-link-alt"})]}),e.credits[t].length?(0,E.jsx)(P.Z,{children:e.credits[t].map((function(e){var t;return(0,E.jsx)("li",{className:"col-5 col-sm-3 col-md-2",children:(0,E.jsxs)(G.Z,{href:e.tmdbURI,target:"_blank",children:[(0,E.jsx)(q,{src:e.profile_url,title:e.name,type:"profile"}),e.name,(0,E.jsx)("div",{className:"fst-italic small",children:e.character||(null===(t=e.job)||void 0===t?void 0:t.join(" / "))})]})},e.id)}))}):(0,E.jsx)("p",{children:"No data available"})]},t)})):null},F=V;var Y=function(){var e=U().movieDetails;return e.recommendations.length?(0,E.jsxs)("div",{className:"p-3",children:[(0,E.jsxs)("h2",{className:"h4",children:["Recommendations",(0,E.jsx)(C.G,{className:"ms-1 small",icon:"external-link-alt"})]}),(0,E.jsx)(P.Z,{children:e.recommendations.map((function(e){return(0,E.jsx)("li",{className:"col-5 col-md-3 col-lg-2",children:(0,E.jsxs)(G.Z,{href:e.tmdbURI,target:"_blank",children:[(0,E.jsx)(q,{src:e.poster_url,title:e.title,type:"poster"}),e.title]})},e.id)}))})]}):null},z=Y;var B=function(){var e=U().movieDetails,t=e.runtime,r=e.release_date,n=e.genres,a=e.budget,i=e.revenue,s=e.production_companies,o=e.production_countries,l=e.spoken_languages,c=[{title:"Runtime",value:"".concat(t," minutes")},{title:"Release date",value:r},{title:"Genres",value:n.map((function(e){return e.name}))},{title:"Budget",value:a},{title:"Revenue",value:i},{title:"Production companies",value:s.map((function(e){return e.name}))},{title:"Production countries",value:o.map((function(e){return e.name}))},{title:"Spoken languages",value:l.map((function(e){return e.english_name}))}];return(0,E.jsx)(P.Z,{children:c.map((function(e){var t=e.title,r=e.value;return(0,E.jsxs)("li",{className:"col-auto",children:[(0,E.jsx)("div",{children:t}),Array.isArray(r)?(0,E.jsx)("ul",{className:"fw-bold list-unstyled mb-0",children:r.map((function(e){return(0,E.jsx)("li",{children:(0,E.jsx)("span",{className:"badge bg-secondary",children:e})},e)}))}):(0,E.jsx)("div",{className:"fw-bold",children:r})]},t)}))})};var W=function(){var e=U().movieDetails;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"p-3",children:[(0,E.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[(0,E.jsx)("div",{className:"col-6 col-lg-4",children:(0,E.jsx)(q,{src:e.poster_url,title:e.title,type:"poster"})}),(0,E.jsx)("div",{className:"col-12 col-sm-6 col-lg-8 lead",children:e.overview})]}),(0,E.jsx)(B,{}),(0,E.jsx)(F,{}),e.tagline&&(0,E.jsx)("blockquote",{className:"blockquote px-5 text-center",children:'"'.concat(e.tagline,'"')})]}),(0,E.jsx)(q,{src:e.backdrop_url,title:e.title,type:"backdrop"}),(0,E.jsxs)("div",{className:"p-3 text-end",children:[(0,E.jsxs)("div",{children:["View movie at",(0,E.jsx)(C.G,{className:"ms-1 small",icon:"external-link-alt"})]}),(0,E.jsx)("ul",{className:"list-inline",children:[{href:"LetterboxdURI",name:"Letterboxd"},{href:"tmdbURI",name:"TMDb"}].map((function(t){var r=t.href,n=t.name;return(0,E.jsx)("li",{className:"list-inline-item",children:(0,E.jsx)("a",{className:"btn btn-danger btn-sm",href:e[r],target:"_blank",rel:"noopener noreferrer",children:n})},n)}))})]}),(0,E.jsx)(z,{})]})},X=W;var H=function(){var e=U().movieDetails;return(0,E.jsxs)("div",{className:"bg-secondary p-3",children:[(0,E.jsxs)("h1",{className:"h3",children:[e.title,(0,E.jsxs)("span",{className:"font-italic ms-2 small",children:["(".concat(e.release_year),e.title!==e.original_title&&', "'.concat(e.original_title,'"'),")"]})]}),(0,E.jsxs)("div",{className:"small",children:[e.Rating," of 5",(0,E.jsx)(C.G,{className:"mx-1 text-warning",icon:"star"}),(0,E.jsx)("span",{className:"small",children:"by me"})]}),(0,E.jsxs)("div",{className:"small",children:[e.vote_average," of 10",(0,E.jsx)(C.G,{className:"mx-1 text-warning",icon:"star"}),(0,E.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})},J=H;var K=function(){var e=U(),t=e.movieDetails,r=e.movieDetailsStatus;return(0,E.jsx)(L.Z,{dataStatus:r,hasData:""!==t.id,children:(0,E.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[(0,E.jsx)(J,{}),(0,E.jsx)(X,{})]})})},Q=K;var $=function(){var e=(0,T.a)().movieDiary,t=(0,M.D)().movieRatings,r=(0,o.UO)().movieId,n=[].concat(i(e),i(t)).find((function(e){return e.Id===r}));return(0,E.jsx)(A,{movie:n,children:(0,E.jsx)(Q,{})})}}}]);
//# sourceMappingURL=323.9de85ba8.chunk.js.map