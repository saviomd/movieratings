(this.webpackJsonpmovieratings=this.webpackJsonpmovieratings||[]).push([[0],{40:function(e,t,a){"use strict";a.r(t);var r=a(1),i=a.n(r),n=a(24),c=a.n(n),s=a(7),o=a(5),l=a(2),d=function(e,t){return e.filter((function(e){return e.Name.toLowerCase().includes(t.toLowerCase())}))},m=function(e){return e.reverse(),e.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{Id:e.LetterboxdURI.length?e.LetterboxdURI.split("boxd.it/")[1]:t.toString(),Name:e.Name.toString(),DateFormatted:new Date(e.Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},e.WatchedDate&&{WatchedDateFormatted:new Date(e.WatchedDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})}))},j=a(0),b=i.a.createContext(),u={movieDiary:[],movieDiaryPage:1,movieDiarySearchString:"",movieDiaryStatus:""};function v(e,t){switch(t.type){case"setMovieDiary":return Object(l.a)(Object(l.a)({},e),{},{movieDiary:t.payload,movieDiaryStatus:"loaded"});case"setMovieDiaryPage":return Object(l.a)(Object(l.a)({},e),{},{movieDiaryPage:e.movieDiaryPage+1});case"setMovieDiarySearchString":return Object(l.a)(Object(l.a)({},e),{},{movieDiarySearchString:t.payload.toLowerCase()});case"setMovieDiaryStatus":return Object(l.a)(Object(l.a)({},e),{},{movieDiaryStatus:t.payload});default:throw new Error}}var h=function(e){var t=e.children,a=Object(r.useReducer)(v,u),i=Object(s.a)(a,2),n=i[0],c=i[1],o=Object(r.useMemo)((function(){return d(n.movieDiary,n.movieDiarySearchString)}),[n.movieDiary,n.movieDiarySearchString]),h=Object(r.useMemo)((function(){var e=100*n.movieDiaryPage;return o.slice(0,e)}),[o,n.movieDiaryPage]),O=Object(r.useMemo)((function(){var e=n.movieDiary.reduce((function(e,t){var a=t.WatchedDate.split("-")[0];return e[a]=e[a]?e[a]+=1:e[a]=1,e}),{}),t=0;return Object.values(e).forEach((function(e){t=e>t?e:t})),{groups:e,max:t}}),[n.movieDiary]);function g(){return c({type:"setMovieDiaryStatus",payload:"loading"}),fetch("https://saviomd.com/movieratings/data/diary.json").then((function(e){if(!e.ok)throw Error(e.status);return e.json()})).then((function(e){var t=m(e);return c({type:"setMovieDiary",payload:t}),t})).catch((function(){c({type:"setMovieDiaryStatus",payload:"error"})}))}Object(r.useEffect)((function(){g()}),[]);var p=Object(r.useMemo)((function(){return Object(l.a)(Object(l.a)({},n),{},{dispatchMovieDiary:c,movieDiaryFiltered:o,movieDiaryPaginated:h,moviesPerYearWatched:O})}),[o,h,O,n]);return Object(j.jsx)(b.Provider,{value:p,children:t})},O=i.a.createContext(),g={movieRatings:[],movieRatingsPage:1,movieRatingsSearchString:"",movieRatingsStatus:""};function p(e,t){switch(t.type){case"setMovieRatings":return Object(l.a)(Object(l.a)({},e),{},{movieRatings:t.payload,movieRatingsStatus:"loaded"});case"setMovieRatingsPage":return Object(l.a)(Object(l.a)({},e),{},{movieRatingsPage:e.movieRatingsPage+1});case"setMovieRatingsSearchString":return Object(l.a)(Object(l.a)({},e),{},{movieRatingsSearchString:t.payload.toLowerCase()});case"setMovieRatingsStatus":return Object(l.a)(Object(l.a)({},e),{},{movieRatingsStatus:t.payload});default:throw new Error}}var x=function(e){var t=e.children,a=Object(r.useReducer)(p,g),i=Object(s.a)(a,2),n=i[0],c=i[1],o=Object(r.useMemo)((function(){return d(n.movieRatings,n.movieRatingsSearchString)}),[n.movieRatings,n.movieRatingsSearchString]),b=Object(r.useMemo)((function(){var e=100*n.movieRatingsPage;return o.slice(0,e)}),[o,n.movieRatingsPage]),u=Object(r.useMemo)((function(){var e=n.movieRatings.reduce((function(e,t){var a="".concat(t.Year.toString().substr(0,3),"0");return e[a]=e[a]?e[a]+=1:e[a]=1,e}),{}),t=0;return Object.values(e).forEach((function(e){t=e>t?e:t})),{groups:e,max:t}}),[n.movieRatings]),v=Object(r.useMemo)((function(){var e=n.movieRatings.reduce((function(e,t){var a=t.Rating;return e[a]=e[a]?e[a]+=1:e[a]=1,e}),{}),t=0;return Object.values(e).forEach((function(e){t=e>t?e:t})),{groups:e,max:t}}),[n.movieRatings]);function h(){return c({type:"setMovieRatingsStatus",payload:"loading"}),fetch("https://saviomd.com/movieratings/data/ratings.json").then((function(e){if(!e.ok)throw Error(e.status);return e.json()})).then((function(e){var t=m(e);return c({type:"setMovieRatings",payload:t}),t})).catch((function(){c({type:"setMovieRatingsStatus",payload:"error"})}))}Object(r.useEffect)((function(){h()}),[]);var x=Object(r.useMemo)((function(){return Object(l.a)(Object(l.a)({},n),{},{dispatchMovieRatings:c,movieRatingsFiltered:o,movieRatingsPaginated:b,moviesPerDecadeReleased:u,moviesPerRatingGiven:v})}),[o,b,u,v,n]);return Object(j.jsx)(O.Provider,{value:x,children:t})},f=a(13),y=a(11),S=a(12);a(34),a(35);f.b.add(y.a,y.b,y.c,y.d,y.e,y.f,y.g,y.h,y.i);var N=function(e){var t=e.children;return Object(j.jsx)(S.a,{children:Object(j.jsx)("div",{className:"bg-dark text-white",children:t})})},w=a(4),R=function(e){var t=e.children,a=e.href,r=e.margin,i=e.target,n={both:"m-1",left:"ms-1",none:"",right:"me-1"}[r];return Object(j.jsx)("a",{className:"".concat(n," text-danger text-decoration-none"),href:a,target:i,rel:"_blank"===i?"noopener noreferrer":null,children:t})};R.defaultProps={margin:null,target:null};var D=R,M=Object(r.memo)((function(){var e=(new Date).getFullYear();return Object(j.jsxs)("footer",{className:"border-secondary border-top mb-3 pt-3 small text-center",children:["\xa9 2017-",e,Object(j.jsxs)(D,{href:"http://saviomd.com/",margin:"left",target:"_blank",children:[Object(j.jsx)("img",{alt:"saviomd.com",className:"me-1",src:"https://saviomd.com/img/favicon.png",height:"15",width:"15"}),"S\xe1vio Mendes",Object(j.jsx)(w.a,{className:"ms-1 small",icon:"external-link-alt"})]})]})})),_=function(e){var t=e.link;return Object(j.jsxs)(S.c,{to:t.path,exact:!0,activeClassName:"active",className:"btn btn-danger btn-sm",children:[Object(j.jsx)(w.a,{icon:t.icon}),Object(j.jsx)("span",{className:"d-none d-sm-inline-block ms-1",children:t.name})]})},P=function(e){var t=e.navLinks;return Object(j.jsx)("nav",{className:"btn-group",children:t.map((function(e){return Object(j.jsx)(_,{link:e},e.path)}))})},k=function(e){var t=e.navLinks;return Object(j.jsx)("header",{className:"border-bottom border-secondary mb-3",children:Object(j.jsxs)("div",{className:"align-items-center my-2 row",children:[Object(j.jsx)("h1",{className:"col h5 mb-0",children:Object(j.jsx)(S.c,{to:"/",exact:!0,className:"text-decoration-none text-white",children:"Movie Ratings"})}),Object(j.jsx)("div",{className:"col-auto",children:Object(j.jsx)(P,{navLinks:t})})]})})},C=a(22),I={img:{attributionUrl:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",baseUrl:"https://image.tmdb.org/t/p/",backdropSize:"w1280",fallbackUrl:"https://www.themoviedb.org/assets/1/v4/logos/293x302-powered-by-square-blue-ee05c47ab249273a6f9f1dcafec63daba386ca30544567629deb1809395d8516.png",posterSize:"w780"},key:"api_key=6f875d4fba2e999f480afa6275a08f75",pathMovieCredits:"movie/{movie_id}/credits",pathMovieRecommendations:"movie/{movie_id}/recommendations",pathSearchMovies:"search/movie",url:"https://api.themoviedb.org/3/"},F=function(e,t){return{backdrop_url:t.backdrop_path?I.img.baseUrl+I.img.backdropSize+t.backdrop_path:null,id:t.id,LetterboxdURI:e.LetterboxdURI,original_language:t.original_language.toUpperCase(),original_title:t.original_title,overview:t.overview,poster_url:t.poster_path?I.img.baseUrl+I.img.posterSize+t.poster_path:null,Rating:e.Rating,release_year:t.release_date.split("-")[0],title:t.title,tmdbURI:"https://www.themoviedb.org/movie/".concat(t.id),vote_average:t.vote_average,vote_count:t.vote_count}},E=i.a.createContext(),L={movieInfo:{backdrop_url:I.img.fallbackUrl,id:"",LetterboxdURI:"",overview:"",poster_url:I.img.fallbackUrl,Rating:"",title:"",vote_average:""},movieInfoStatus:""};function U(e,t){switch(t.type){case"setMovieInfo":return Object(l.a)(Object(l.a)({},e),{},{movieInfo:t.payload,movieInfoStatus:"loaded"});case"setMovieInfoStatus":return Object(l.a)(Object(l.a)({},e),{},{movieInfoStatus:t.payload});default:throw new Error}}var T=function(e){var t=e.children,a=e.movie,i=Object(r.useReducer)(U,L),n=Object(s.a)(i,2),c=n[0],o=n[1],l=Object(r.useCallback)((function(){void 0!==a?(o({type:"setMovieInfoStatus",payload:"loading"}),function(e){return fetch("".concat(I.url).concat(I.pathSearchMovies,"?").concat(I.key,"&query=").concat(e.Name,"&year=").concat(e.Year)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))}(a).then((function(e){if(!e.results.length)throw Error("No movie found");var t=e.results.find((function(e){return e.title===a.Name&&e.release_date.indexOf(a.Year)>-1}));if(void 0===t)throw Error("No movie found");o({type:"setMovieInfo",payload:F(a,t)})})).catch((function(){o({type:"setMovieInfoStatus",payload:"error"})}))):o({type:"setMovieInfoStatus",payload:"error"})}),[a]);Object(r.useEffect)((function(){l()}),[l]);var d=Object(r.useMemo)((function(){return c}),[c]);return Object(j.jsx)(E.Provider,{value:d,children:t})};T.defaultProps={movie:void 0};var W=a(3),Y=a.n(W),z=Object(r.memo)((function(e){var t=e.type,a={error:{icon:"sad-tear",text:"An error has ocurred"},loading:{icon:"hourglass-half",text:"Loading..."},noData:{icon:"frown",text:"No data to show"},noMovies:{icon:"frown",text:"No movies to show"},noStats:{icon:"frown",text:"No stats to show"},pageNotFound:{icon:"dizzy",text:"Page not found"}},r="animate__".concat("loading"===t?"heartBeat":"headShake");return Object(j.jsxs)("div",{className:"lead p-3 text-center",children:[Object(j.jsx)("div",{className:"animate__animated ".concat(r," h3 mb-3"),children:Object(j.jsx)("span",{className:"bg-secondary p-2 rounded",children:Object(j.jsx)(w.a,{icon:a[t].icon})})}),a[t].text]})})),A=["","error","loading","loaded"],G=Object(r.memo)((function(e){var t=e.children,a=e.dataStatus,r=e.hasData,i=e.messageNoData;return Object(j.jsxs)(j.Fragment,{children:["loaded"===a&&r&&Object(j.jsx)(j.Fragment,{children:t}),"loaded"===a&&!r&&Object(j.jsx)(z,{type:i}),("loading"===a||"error"===a)&&Object(j.jsx)(z,{type:a})]})}));G.propTypes={children:Y.a.node.isRequired,dataStatus:Y.a.oneOf(A),hasData:Y.a.bool,messageNoData:Y.a.string},G.defaultProps={dataStatus:A[0],hasData:!0,messageNoData:"noData"};var B=G,q=function(e){return Object(l.a)(Object(l.a)({},e),{},{cast:e.cast.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})})),crew:e.crew.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})}))})},J=i.a.createContext(),V={movieCredits:{cast:[],crew:[],id:""},movieCreditsStatus:""};function X(e,t){switch(t.type){case"setMovieCredits":return Object(l.a)(Object(l.a)({},e),{},{movieCredits:t.payload,movieCreditsStatus:"loaded"});case"setMovieCreditsStatus":return Object(l.a)(Object(l.a)({},e),{},{movieCreditsStatus:t.payload});default:throw new Error}}var H=function(e){var t=e.children,a=e.movieId,i=Object(r.useReducer)(X,V),n=Object(s.a)(i,2),c=n[0],o=n[1];function l(e){o({type:"setMovieCreditsStatus",payload:"loading"}),function(e){var t="".concat(I.url).concat(I.pathMovieCredits,"?").concat(I.key).replace("{movie_id}",e);return fetch(t).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))}(e).then((function(e){o({type:"setMovieCredits",payload:q(e)})})).catch((function(){o({type:"setMovieCreditsStatus",payload:"error"})}))}Object(r.useEffect)((function(){l(a)}),[a]);var d=Object(r.useMemo)((function(){return c}),[c]);return Object(j.jsx)(J.Provider,{value:d,children:t})},K=function(e){return e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{poster_url:e.poster_path?I.img.baseUrl+I.img.posterSize+e.poster_path:null,tmdbURI:"https://www.themoviedb.org/movie/".concat(e.id)})}))},Q=i.a.createContext(),Z={movieRecommendations:[],movieRecommendationsStatus:""};function $(e,t){switch(t.type){case"setMovieRecommendations":return Object(l.a)(Object(l.a)({},e),{},{movieRecommendations:t.payload,movieRecommendationsStatus:"loaded"});case"setMovieRecommendationsStatus":return Object(l.a)(Object(l.a)({},e),{},{movieRecommendationsStatus:t.payload});default:throw new Error}}var ee=function(e){var t=e.children,a=e.movieId,i=Object(r.useReducer)($,Z),n=Object(s.a)(i,2),c=n[0],o=n[1];function l(e){o({type:"setMovieRecommendationsStatus",payload:"loading"}),function(e){var t="".concat(I.url).concat(I.pathMovieRecommendations,"?").concat(I.key).replace("{movie_id}",e);return fetch(t).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))}(e).then((function(e){o({type:"setMovieRecommendations",payload:K(e.results)})})).catch((function(){o({type:"setMovieRecommendationsStatus",payload:"error"})}))}Object(r.useEffect)((function(){l(a)}),[a]);var d=Object(r.useMemo)((function(){return c}),[c]);return Object(j.jsx)(Q.Provider,{value:d,children:t})},te=function(e){var t=e.src,a=e.title,r=e.type,i={backdrop:{height:300,width:533},poster:{height:450,width:300}}[r],n={paddingTop:"".concat(i.height/i.width*100,"%")};return Object(j.jsx)("div",{className:"bg-secondary ratio text-white",style:n,children:t?Object(j.jsx)("img",{alt:"".concat(r," for ").concat(a),loading:"lazy",src:t}):Object(j.jsx)("div",{className:"p-3 text-center",children:"No ".concat(r," available for ").concat(a)})})};te.defaultProps={src:null};var ae=te,re=function(e){var t=e.children;return Object(j.jsx)("ul",{className:"flex-nowrap g-3 list-unstyled mb-0 pb-3 row",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t})},ie=function(){var e=Object(r.useContext)(J),t=e.movieCredits,a=e.movieCreditsStatus;return Object(j.jsxs)(B,{dataStatus:a,hasData:!!t.id,children:[Object(j.jsxs)("h2",{className:"h4",children:["Cast",Object(j.jsx)(w.a,{className:"ms-1 small",icon:"external-link-alt"})]}),t.cast.length?Object(j.jsx)(re,{children:t.cast.map((function(e){return Object(j.jsx)("li",{className:"col-auto",children:Object(j.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(j.jsx)("div",{className:"small",children:e.character})]})},e.credit_id)}))}):Object(j.jsx)("p",{children:"No data available"}),Object(j.jsxs)("h2",{className:"h4",children:["Crew",Object(j.jsx)(w.a,{className:"ms-1 small",icon:"external-link-alt"})]}),t.crew.length?Object(j.jsx)(re,{children:t.crew.map((function(e){return Object(j.jsx)("li",{className:"col-auto",children:Object(j.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(j.jsx)("div",{className:"small",children:e.job})]})},e.credit_id)}))}):Object(j.jsx)("p",{children:"No data available"})]})},ne=function(){var e=Object(r.useContext)(Q),t=e.movieRecommendations,a=e.movieRecommendationsStatus;return Object(j.jsx)(B,{dataStatus:a,hasData:!!t.length,children:Object(j.jsxs)("div",{className:"p-3",children:[Object(j.jsxs)("h2",{className:"h4",children:["Recommendations",Object(j.jsx)(w.a,{className:"ms-1 small",icon:"external-link-alt"})]}),Object(j.jsx)(re,{children:t.map((function(e){return Object(j.jsx)("li",{className:"col-5 col-md-3 col-lg-2",children:Object(j.jsxs)(D,{href:e.tmdbURI,target:"_blank",children:[Object(j.jsx)(ae,{src:e.poster_url,title:e.title,type:"poster"}),e.title]})},e.id)}))})]})})},ce=function(){var e=Object(r.useContext)(E).movieInfo;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"p-3",children:[Object(j.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[Object(j.jsx)("div",{className:"col-6 col-lg-4",children:Object(j.jsx)(ae,{src:e.poster_url,title:e.title,type:"poster"})}),Object(j.jsxs)("div",{className:"col-12 col-sm-6 col-lg-8 text-end",children:[Object(j.jsx)("div",{className:"lead text-start",children:e.overview}),Object(j.jsx)("div",{className:"mb-3",children:Object(j.jsx)("span",{className:"badge bg-secondary ms-2",children:e.original_language})}),Object(j.jsx)("div",{className:"mb-3",children:Object(j.jsx)("a",{className:"btn btn-danger btn-sm",href:e.LetterboxdURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at Letterboxd"})}),Object(j.jsx)("div",{className:"mb-3",children:Object(j.jsx)("a",{className:"btn btn-danger btn-sm",href:e.tmdbURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at TMDB"})})]})]}),Object(j.jsx)(H,{movieId:e.id,children:Object(j.jsx)(ie,{})})]}),Object(j.jsx)(ae,{src:e.backdrop_url,title:e.title,type:"backdrop"}),Object(j.jsx)(ee,{movieId:e.id,children:Object(j.jsx)(ne,{})})]})},se=function(){var e=Object(r.useContext)(E).movieInfo;return Object(j.jsxs)("div",{className:"bg-secondary p-3",children:[Object(j.jsxs)("h1",{className:"h3",children:[e.title,Object(j.jsx)("span",{className:"font-italic ms-2 small",children:"(".concat(e.release_year).concat(e.title!==e.original_title?', "'.concat(e.original_title,'"'):"",")")})]}),Object(j.jsxs)("div",{className:"small",children:[e.Rating," of 5",Object(j.jsx)(w.a,{className:"mx-1 text-warning",icon:"star"}),Object(j.jsx)("span",{className:"small",children:"by me"})]}),Object(j.jsxs)("div",{className:"small",children:[e.vote_average," of 10",Object(j.jsx)(w.a,{className:"mx-1 text-warning",icon:"star"}),Object(j.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})},oe=function(){var e=Object(r.useContext)(E),t=e.movieInfo,a=e.movieInfoStatus;return Object(j.jsx)(B,{dataStatus:a,hasData:""!==t.id,children:Object(j.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[Object(j.jsx)(se,{}),Object(j.jsx)(ce,{})]})})},le=function(e){var t=e.match,a=Object(r.useContext)(b).movieDiary,i=Object(r.useContext)(O).movieRatings,n=t.params.movieId,c=[].concat(Object(C.a)(a),Object(C.a)(i)).find((function(e){return e.Id===n}));return Object(j.jsx)(T,{movie:c,children:Object(j.jsx)(oe,{})})},de=Object(r.memo)((function(e){var t,a=e.movie,r=e.type;return"Diary"===r&&a.WatchedDateFormatted?t="watched in ".concat(a.WatchedDateFormatted):"Ratings"===r&&a.DateFormatted&&(t="rated in ".concat(a.DateFormatted)),Object(j.jsxs)(S.b,{className:"btn btn-secondary d-block",to:"/movie/".concat(a.Id),children:[Object(j.jsxs)("div",{className:"text-start text-truncate",children:[a.Name,Object(j.jsxs)("span",{className:"ms-1 small",children:["(",a.Year,")"]})]}),Object(j.jsxs)("div",{className:"align-items-end row small",children:[Object(j.jsx)("div",{className:"col text-start text-warning",children:Array.from(Array(a.Rating)).map((function(e,t){return Object(j.jsx)(w.a,{className:"me-1",icon:"star"},t)}))}),Object(j.jsx)("div",{className:"col small text-end",children:t})]})]})})),me={dispatchMovie:null,dispatchMovieType:"",moviesFiltered:[],moviesPaginated:[],moviesStatus:null};function je(e,t){switch(t.type){case"setAll":return Object(l.a)(Object(l.a)({},e),t.payload);default:throw new Error}}var be=Object(r.memo)((function(e){var t=e.type,a=Object(r.useReducer)(je,me),i=Object(s.a)(a,2),n=i[0],c=i[1],o=Object(r.useContext)(b),l=o.dispatchMovieDiary,d=o.movieDiaryFiltered,m=o.movieDiaryPage,u=o.movieDiaryPaginated,v=o.movieDiarySearchString,h=o.movieDiaryStatus,g=Object(r.useContext)(O),p=g.dispatchMovieRatings,x=g.movieRatingsFiltered,f=g.movieRatingsPage,y=g.movieRatingsPaginated,S=g.movieRatingsSearchString,N=g.movieRatingsStatus;return Object(r.useEffect)((function(){var e;"Diary"===t?e={dispatchMovie:l,dispatchMovieType:"setMovieDiaryPage",moviesFiltered:d,moviesPaginated:u,moviesStatus:h}:"Ratings"===t&&(e={dispatchMovie:p,dispatchMovieType:"setMovieRatingsPage",moviesFiltered:x,moviesPaginated:y,moviesStatus:N}),c({type:"setAll",payload:e})}),[l,p,d,m,u,v,h,x,f,y,S,N,t]),Object(j.jsx)(B,{dataStatus:n.moviesStatus,hasData:!!n.moviesFiltered.length,messageNoData:"noMovies",children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("ul",{className:"list-unstyled",children:n.moviesPaginated.map((function(e){return Object(j.jsx)("li",{className:"mb-3",children:Object(j.jsx)(de,{movie:e,type:t})},e.Id)}))}),n.moviesPaginated.length<n.moviesFiltered.length&&Object(j.jsx)("div",{className:"mb-3 text-center",children:Object(j.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(){return n.dispatchMovie({type:n.dispatchMovieType})},children:"Show more"})})]})})})),ue={dispatchMovie:null,dispatchMovieType:"",movieSearchString:"",moviesFiltered:[]};function ve(e,t){switch(t.type){case"setAll":return Object(l.a)(Object(l.a)({},e),t.payload);default:throw new Error}}var he=function(e){var t=e.type,a=Object(r.useReducer)(ve,ue),i=Object(s.a)(a,2),n=i[0],c=i[1],o=Object(r.useContext)(b),l=o.dispatchMovieDiary,d=o.movieDiaryFiltered,m=o.movieDiarySearchString,u=o.movieDiaryStatus,v=Object(r.useContext)(O),h=v.dispatchMovieRatings,g=v.movieRatingsFiltered,p=v.movieRatingsSearchString,x=v.movieRatingsStatus;return Object(r.useEffect)((function(){var e;"Diary"===t?e={dispatchMovie:l,dispatchMovieType:"setMovieDiarySearchString",movieSearchString:m,moviesFiltered:d}:"Ratings"===t&&(e={dispatchMovie:h,dispatchMovieType:"setMovieRatingsSearchString",movieSearchString:p,moviesFiltered:g}),c({type:"setAll",payload:e})}),[l,h,d,m,u,g,p,x,t]),Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsxs)("div",{className:"input-group mb-1",children:[Object(j.jsx)("input",{id:"search-movie",className:"form-control",placeholder:"Search...",type:"text",value:n.movieSearchString,onChange:function(e){return n.dispatchMovie({type:n.dispatchMovieType,payload:e.target.value})}}),Object(j.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:function(){return n.dispatchMovie({type:n.dispatchMovieType,payload:""})},children:Object(j.jsx)(w.a,{icon:"times"})})]}),Object(j.jsxs)("p",{className:"small text-end",children:[n.moviesFiltered.length," movies"]})]})},Oe=function(e){var t=e.type;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"h4",children:t}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 col-sm-4",children:Object(j.jsx)(he,{type:t})}),Object(j.jsx)("div",{className:"col-12 col-sm-8",children:Object(j.jsx)(be,{type:t})})]})]})},ge=function(){return Object(j.jsx)(z,{type:"pageNotFound"})},pe=Object(r.memo)((function(e){var t=e.width;return Object(j.jsx)("div",{className:"bg-secondary overflow-hidden rounded",children:Object(j.jsx)("div",{className:"animate__animated animate__slideInLeft bg-danger pb-2 rounded",style:{width:"".concat(t,"%")}})})}));pe.propTypes={width:Y.a.oneOfType([Y.a.number,Y.a.string]).isRequired};var xe=pe,fe={moviesPerDecadeReleased:"Per decade released",moviesPerRatingGiven:"Per rating given",moviesPerYearWatched:"Per year watched"},ye=Object(r.memo)((function(e){var t=e.movies,a=e.moviesStatus,r=e.type;return Object(j.jsxs)("div",{className:"border border-secondary p-3 rounded",children:[Object(j.jsx)("h1",{className:"h5",children:fe[r]}),Object(j.jsx)(B,{dataStatus:a,hasData:!!t.groups,messageNoData:"noStats",children:Object(j.jsx)("ul",{className:"list-unstyled",children:Object.entries(t.groups).reverse().map((function(e){var a=Object(s.a)(e,2),i=a[0],n=a[1],c=100*n/t.max;return Object(j.jsxs)("li",{className:"mb-2",children:[Object(j.jsxs)("div",{className:"g-0 row",children:[Object(j.jsx)("div",{className:"col",children:function(){if("moviesPerRatingGiven"===r){for(var e=[],t=0;t<i;t+=1)e.push(Object(j.jsx)(w.a,{className:"me-1 text-warning",icon:"star"},t));return e}return i}()}),Object(j.jsx)("div",{className:"col-auto fw-bold",children:n})]}),Object(j.jsx)(xe,{width:c})]},i)}))})})]})})),Se=function(){var e=Object(r.useContext)(b),t=e.moviesPerYearWatched,a=e.movieDiaryStatus,i=Object(r.useContext)(O),n=i.moviesPerDecadeReleased,c=i.moviesPerRatingGiven,s=i.movieRatingsStatus;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"h4",children:"Stats"}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",children:Object(j.jsx)(ye,{movies:t,moviesStatus:a,type:"moviesPerYearWatched"})}),Object(j.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",children:Object(j.jsx)(ye,{movies:c,moviesStatus:s,type:"moviesPerRatingGiven"})}),Object(j.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",children:Object(j.jsx)(ye,{movies:n,moviesStatus:s,type:"moviesPerDecadeReleased"})})]})]})},Ne=Object(r.memo)((function(){return Object(j.jsxs)("div",{className:"border-secondary border-top pt-3 small text-center",children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("img",{alt:"Letterboxd",src:"https://a.ltrbxd.com/logos/letterboxd-logo-v-neg-rgb-1000px.png",height:"48"}),Object(j.jsx)("br",{}),"My Ratings and Diary data are exported from Letterboxd from time to time.",Object(j.jsx)("br",{}),"My",Object(j.jsxs)(D,{href:"https://letterboxd.com/saviomd",margin:"both",target:"_blank",children:["profile",Object(j.jsx)(w.a,{className:"ms-1 small",icon:"external-link-alt"})]}),"will have more up to date information."]}),Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("img",{alt:"TMDb",src:I.img.attributionUrl,height:"48"}),Object(j.jsx)("br",{}),"This product uses the TMDb API but is not endorsed or certified by TMDb."]})]})})),we={navLinks:[{icon:"star",name:"Ratings",path:"/"},{icon:"calendar-alt",name:"Diary",path:"/diary"},{icon:"chart-bar",name:"Stats",path:"/stats"}]},Re=function(){var e=Object(r.useState)(we),t=Object(s.a)(e,1)[0];return Object(j.jsx)(N,{children:Object(j.jsx)(h,{children:Object(j.jsx)(x,{children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"justify-content-center row",children:Object(j.jsxs)("div",{className:"col-12 col-md-10",children:[Object(j.jsx)(k,{navLinks:t.navLinks}),Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{path:"/",exact:!0,render:function(){return Object(j.jsx)(Oe,{type:"Ratings"})}}),Object(j.jsx)(o.a,{path:"/diary",render:function(){return Object(j.jsx)(Oe,{type:"Diary"})}}),Object(j.jsx)(o.a,{path:"/movie/:movieId",render:function(e){var t=e.match;return Object(j.jsx)(le,{match:t})}}),Object(j.jsx)(o.a,{path:"/stats",component:Se}),Object(j.jsx)(o.a,{component:ge})]}),Object(j.jsx)(Ne,{}),Object(j.jsx)(M,{})]})})})})})})},De=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,r=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),i(e),n(e),c(e)}))};c.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(Re,{})}),document.getElementById("root")),De()}},[[40,1,2]]]);
//# sourceMappingURL=main.b89b798a.chunk.js.map