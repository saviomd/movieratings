(this.webpackJsonpmovieratings=this.webpackJsonpmovieratings||[]).push([[3],{51:function(e,t,a){"use strict";a.r(t);var r=a(22);var c=a(30);function s(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=a(0),i=a.n(n),o=a(14),l=a(3),d=a(28),b=function(e){var t=e.path,a=e.queryString,r=void 0===a?"":a,c=d.a.url,s=d.a.key;return fetch("".concat(c).concat(t,"?api_key=").concat(s).concat(r)).then((function(e){if(!e.ok)throw Error(e.status);return e.json()}))},m=d.a.methods,j=m.movieDetails,u=m.searchMovies,h=function(e){var t=e.credits;return Object(l.a)(Object(l.a)({},t),{},{cast:null===t||void 0===t?void 0:t.cast.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})})),crew:null===t||void 0===t?void 0:t.crew.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{tmdbURI:"https://www.themoviedb.org/person/".concat(e.id)})}))})},v=d.a.img.poster,p=function(e){return e.movies.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{poster_url:v({path:e.poster_path}),tmdbURI:"https://www.themoviedb.org/movie/".concat(e.id)})}))},O=d.a.img,x=O.backdrop,f=O.poster,g=function(e){var t=e.movie,a=e.movieDetails;return Object(l.a)(Object(l.a)({},a),{},{backdrop_url:x({path:a.backdrop_path}),credits:h({credits:a.credits}),LetterboxdURI:t.LetterboxdURI,original_language:a.original_language.toUpperCase(),poster_url:f({path:a.poster_path}),Rating:t.Rating,recommendations:p({movies:a.recommendations.results}),release_year:a.release_date.split("-")[0],tmdbURI:"https://www.themoviedb.org/movie/".concat(a.id)})},y=a(1),N=i.a.createContext(),w={movieDetails:{},movieDetailsStatus:""};function _(e,t){switch(t.type){case"setMovieDetails":return Object(l.a)(Object(l.a)({},e),{},{movieDetails:t.payload,movieDetailsStatus:"loaded"});case"setMovieDetailsStatus":return Object(l.a)(Object(l.a)({},e),{},{movieDetailsStatus:t.payload});default:throw new Error}}var D=function(e){var t=e.children,a=e.movie,r=Object(n.useReducer)(_,w),c=Object(o.a)(r,2),s=c[0],i=c[1],l=Object(n.useCallback)((function(){if(void 0!==a){var e=a.Name,t=a.Year;i({type:"setMovieDetailsStatus",payload:"loading"}),function(e){var t=e.Name,a=e.Year;return b({path:u(),queryString:"&query=".concat(t,"&year=").concat(a)})}({Name:e,Year:t}).then((function(r){if(!r.results.length)throw Error("No movie found");var c=r.results.find((function(a){return a.title===e&&a.release_date.indexOf(t)>-1}));if(void 0===c)throw Error("No movie found");(function(e){var t=e.movieId;return b({path:j({movieId:t}),queryString:"&append_to_response=credits,recommendations"})})({movieId:c.id}).then((function(e){i({type:"setMovieDetails",payload:g({movie:a,movieDetails:e})})}))})).catch((function(){i({type:"setMovieDetailsStatus",payload:"error"})}))}else i({type:"setMovieDetailsStatus",payload:"error"})}),[a]);Object(n.useEffect)((function(){l()}),[l]);var d=Object(n.useMemo)((function(){return s}),[s]);return Object(y.jsx)(N.Provider,{value:d,children:t})};D.defaultProps={movie:void 0};var k=a(26),I=a(27),R=a(29),S=function(e){var t=e.src,a=e.title,r=e.type,c={backdrop:{height:300,width:533},poster:{height:450,width:300}}[r],s={paddingTop:"".concat(c.height/c.width*100,"%")};return Object(y.jsx)("div",{className:"bg-secondary ratio text-white",style:s,children:t?Object(y.jsx)("img",{alt:"".concat(r," for ").concat(a),loading:"lazy",src:t}):Object(y.jsx)("div",{className:"p-3 text-center",children:"No ".concat(r," available for ").concat(a)})})};S.defaultProps={src:null};var U=S,C=a(10),M=function(e){var t=e.children;return Object(y.jsx)("ul",{className:"flex-nowrap g-3 list-unstyled mb-0 pb-3 row",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t})},E=function(){var e=Object(n.useContext)(N).movieDetails;return e.credits?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("h2",{className:"h4",children:["Cast",Object(y.jsx)(C.a,{className:"ms-1 small",icon:"external-link-alt"})]}),e.credits.cast.length?Object(y.jsx)(M,{children:e.credits.cast.map((function(e){return Object(y.jsx)("li",{className:"col-auto",children:Object(y.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(y.jsx)("div",{className:"small",children:e.character})]})},e.credit_id)}))}):Object(y.jsx)("p",{children:"No data available"}),Object(y.jsxs)("h2",{className:"h4",children:["Crew",Object(y.jsx)(C.a,{className:"ms-1 small",icon:"external-link-alt"})]}),e.credits.crew.length?Object(y.jsx)(M,{children:e.credits.crew.map((function(e){return Object(y.jsx)("li",{className:"col-auto",children:Object(y.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(y.jsx)("div",{className:"small",children:e.job})]})},e.credit_id)}))}):Object(y.jsx)("p",{children:"No data available"})]}):null},q=a(16),L=function(){var e=Object(n.useContext)(N).movieDetails;return e.recommendations.length?Object(y.jsxs)("div",{className:"p-3",children:[Object(y.jsxs)("h2",{className:"h4",children:["Recommendations",Object(y.jsx)(C.a,{className:"ms-1 small",icon:"external-link-alt"})]}),Object(y.jsx)(M,{children:e.recommendations.map((function(e){return Object(y.jsx)("li",{className:"col-5 col-md-3 col-lg-2",children:Object(y.jsxs)(q.a,{href:e.tmdbURI,target:"_blank",children:[Object(y.jsx)(U,{src:e.poster_url,title:e.title,type:"poster"}),e.title]})},e.id)}))})]}):null},T=function(){var e=Object(n.useContext)(N).movieDetails;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"p-3",children:[Object(y.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[Object(y.jsx)("div",{className:"col-6 col-lg-4",children:Object(y.jsx)(U,{src:e.poster_url,title:e.title,type:"poster"})}),Object(y.jsxs)("div",{className:"col-12 col-sm-6 col-lg-8 text-end",children:[Object(y.jsx)("div",{className:"lead text-start",children:e.overview}),Object(y.jsx)("div",{className:"mb-3",children:Object(y.jsx)("span",{className:"badge bg-secondary ms-2",children:e.original_language})}),Object(y.jsx)("div",{className:"mb-3",children:Object(y.jsx)("a",{className:"btn btn-danger btn-sm",href:e.LetterboxdURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at Letterboxd"})}),Object(y.jsx)("div",{className:"mb-3",children:Object(y.jsx)("a",{className:"btn btn-danger btn-sm",href:e.tmdbURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at TMDB"})})]})]}),Object(y.jsx)(E,{})]}),Object(y.jsx)(U,{src:e.backdrop_url,title:e.title,type:"backdrop"}),Object(y.jsx)(L,{})]})},A=function(){var e=Object(n.useContext)(N).movieDetails;return Object(y.jsxs)("div",{className:"bg-secondary p-3",children:[Object(y.jsxs)("h1",{className:"h3",children:[e.title,Object(y.jsx)("span",{className:"font-italic ms-2 small",children:"(".concat(e.release_year).concat(e.title!==e.original_title?', "'.concat(e.original_title,'"'):"",")")})]}),Object(y.jsxs)("div",{className:"small",children:[e.Rating," of 5",Object(y.jsx)(C.a,{className:"mx-1 text-warning",icon:"star"}),Object(y.jsx)("span",{className:"small",children:"by me"})]}),Object(y.jsxs)("div",{className:"small",children:[e.vote_average," of 10",Object(y.jsx)(C.a,{className:"mx-1 text-warning",icon:"star"}),Object(y.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})},P=function(){var e=Object(n.useContext)(N),t=e.movieDetails,a=e.movieDetailsStatus;return Object(y.jsx)(R.a,{dataStatus:a,hasData:""!==t.id,children:Object(y.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[Object(y.jsx)(A,{}),Object(y.jsx)(T,{})]})})};t.default=function(e){var t=e.match,a=Object(n.useContext)(k.b).movieDiary,r=Object(n.useContext)(I.b).movieRatings,c=t.params.movieId,i=[].concat(s(a),s(r)).find((function(e){return e.Id===c}));return Object(y.jsx)(D,{movie:i,children:Object(y.jsx)(P,{})})}}}]);
//# sourceMappingURL=3.6db13caf.chunk.js.map