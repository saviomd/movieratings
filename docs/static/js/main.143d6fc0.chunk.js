(this.webpackJsonpmovieratings=this.webpackJsonpmovieratings||[]).push([[0],{37:function(e,t,a){"use strict";a.r(t);var s=a(1),o=a.n(s),r=a(21),i=a.n(r),c=a(12),n=a(7),l=a(5),d=a(13),m=a(11),b=a(2);function j(e,t){return e.filter((e=>e.Name.toLowerCase().includes(t.toLowerCase())))}function v(e){return e.reverse(),e=e.map(((e,t)=>(e.Id=e.LetterboxdURI.length?e.LetterboxdURI.split("boxd.it/")[1]:t.toString(),e.Name=e.Name.toString(),e.DateFormatted=new Date(e.Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),e.WatchedDate&&(e.WatchedDateFormatted=new Date(e.WatchedDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})),e)))}var h=a(0);const u=o.a.createContext(),g={movieDiary:[],movieDiaryPage:1,movieDiarySearchString:"",movieDiaryStatus:""};function p(e,t){switch(t.type){case"setMovieDiary":return Object(b.a)(Object(b.a)({},e),{},{movieDiary:t.payload,movieDiaryStatus:"loaded"});case"setMovieDiaryPage":return Object(b.a)(Object(b.a)({},e),{},{movieDiaryPage:e.movieDiaryPage+1});case"setMovieDiarySearchString":return Object(b.a)(Object(b.a)({},e),{},{movieDiarySearchString:t.payload.toLowerCase()});case"setMovieDiaryStatus":return Object(b.a)(Object(b.a)({},e),{},{movieDiaryStatus:t.payload});default:throw new Error}}const O=({children:e})=>{const t=Object(s.useReducer)(p,g),a=Object(n.a)(t,2),o=a[0],r=a[1],i=Object(s.useMemo)((()=>j(o.movieDiary,o.movieDiarySearchString)),[o.movieDiary,o.movieDiarySearchString]),c=Object(s.useMemo)((()=>{const e=100*o.movieDiaryPage;return i.slice(0,e)}),[i,o.movieDiaryPage]),l=Object(s.useMemo)((()=>{const e=o.movieDiary.reduce(((e,t)=>{const a=t.WatchedDate.split("-")[0];return e[a]?e[a]++:e[a]=1,e}),{});let t=0;for(const a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}}),[o.movieDiary]);function d(){return r({type:"setMovieDiaryStatus",payload:"loading"}),fetch("https://saviomd.com/movieratings/data/diary.json").then((e=>{if(!e.ok)throw Error(e.status);return e.json()})).then((e=>{const t=v(e);return r({type:"setMovieDiary",payload:t}),t})).catch((e=>{r({type:"setMovieDiaryStatus",payload:"error"}),console.log(e.message)}))}Object(s.useEffect)((()=>{d()}),[]);const m=Object(s.useMemo)((()=>Object(b.a)(Object(b.a)({},o),{},{dispatchMovieDiary:r,movieDiaryFiltered:i,movieDiaryPaginated:c,moviesPerYearWatched:l})),[i,c,l,o]);return Object(h.jsx)(u.Provider,{value:m,children:e})},x=o.a.createContext(),y={movieRatings:[],movieRatingsPage:1,movieRatingsSearchString:"",movieRatingsStatus:""};function f(e,t){switch(t.type){case"setMovieRatings":return Object(b.a)(Object(b.a)({},e),{},{movieRatings:t.payload,movieRatingsStatus:"loaded"});case"setMovieRatingsPage":return Object(b.a)(Object(b.a)({},e),{},{movieRatingsPage:e.movieRatingsPage+1});case"setMovieRatingsSearchString":return Object(b.a)(Object(b.a)({},e),{},{movieRatingsSearchString:t.payload.toLowerCase()});case"setMovieRatingsStatus":return Object(b.a)(Object(b.a)({},e),{},{movieRatingsStatus:t.payload});default:throw new Error}}const w=({children:e})=>{const t=Object(s.useReducer)(f,y),a=Object(n.a)(t,2),o=a[0],r=a[1],i=Object(s.useMemo)((()=>j(o.movieRatings,o.movieRatingsSearchString)),[o.movieRatings,o.movieRatingsSearchString]),c=Object(s.useMemo)((()=>{const e=100*o.movieRatingsPage;return i.slice(0,e)}),[i,o.movieRatingsPage]),l=Object(s.useMemo)((()=>{const e=o.movieRatings.reduce(((e,t)=>{const a="".concat(t.Year.toString().substr(0,3),"0");return e[a]?e[a]++:e[a]=1,e}),{});let t=0;for(const a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}}),[o.movieRatings]),d=Object(s.useMemo)((()=>{const e=o.movieRatings.reduce(((e,t)=>{const a=t.Rating;return e[a]?e[a]++:e[a]=1,e}),{});let t=0;for(const a in e)t=e[a]>t?e[a]:t;return{groups:e,max:t}}),[o.movieRatings]);function m(){return r({type:"setMovieRatingsStatus",payload:"loading"}),fetch("https://saviomd.com/movieratings/data/ratings.json").then((e=>{if(!e.ok)throw Error(e.status);return e.json()})).then((e=>{const t=v(e);return r({type:"setMovieRatings",payload:t}),t})).catch((e=>{r({type:"setMovieRatingsStatus",payload:"error"}),console.log(e.message)}))}Object(s.useEffect)((()=>{m()}),[]);const u=Object(s.useMemo)((()=>Object(b.a)(Object(b.a)({},o),{},{dispatchMovieRatings:r,movieRatingsFiltered:i,movieRatingsPaginated:c,moviesPerDecadeReleased:l,moviesPerRatingGiven:d})),[i,c,l,d,o]);return Object(h.jsx)(x.Provider,{value:u,children:e})};var N=a(4);var S=Object(s.memo)((function(){const e=(new Date).getFullYear();return Object(h.jsxs)("footer",{className:"border-secondary border-top mb-3 pt-3 small text-center",children:["\xa9 2017-",e,Object(h.jsxs)("a",{className:"ml-1 text-danger",href:"http://saviomd.com/",target:"_blank",rel:"noopener noreferrer",children:[Object(h.jsx)("img",{alt:"saviomd.com",className:"mr-1",src:"https://saviomd.com/img/favicon.png",height:"15",width:"15"}),"S\xe1vio Mendes",Object(h.jsx)(N.a,{className:"ml-1 small",icon:"external-link-alt"})]})]})}));var R=({link:e})=>Object(h.jsxs)(c.c,{to:e.path,exact:!0,activeClassName:"active",className:"btn btn-danger btn-sm",children:[Object(h.jsx)(N.a,{icon:e.icon}),Object(h.jsx)("span",{className:"d-none d-sm-inline-block ml-1",children:e.name})]});var M=({navLinks:e})=>Object(h.jsx)("nav",{className:"btn-group",children:e.map((e=>Object(h.jsx)(R,{link:e},e.path)))});var D=({navLinks:e})=>Object(h.jsx)("header",{className:"border-bottom border-secondary mb-3",children:Object(h.jsxs)("div",{className:"align-items-center my-2 row",children:[Object(h.jsx)("h1",{className:"col-auto h5 mb-0",children:Object(h.jsx)(c.c,{to:"/",exact:!0,className:"text-white",children:"Movie Ratings"})}),Object(h.jsx)("div",{className:"col text-right",children:Object(h.jsx)(M,{navLinks:e})})]})});var _={img:{attributionUrl:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",baseUrl:"https://image.tmdb.org/t/p/",backdropSize:"w1280",fallbackUrl:"https://www.themoviedb.org/assets/1/v4/logos/293x302-powered-by-square-blue-ee05c47ab249273a6f9f1dcafec63daba386ca30544567629deb1809395d8516.png",posterSize:"w780"},key:"api_key=6f875d4fba2e999f480afa6275a08f75",pathMovieCredits:"movie/{movie_id}/credits",pathMovieRecommendations:"movie/{movie_id}/recommendations",pathSearchMovies:"search/movie",url:"https://api.themoviedb.org/3/"};function k(e,t){return{backdrop_url:t.backdrop_path?_.img.baseUrl+_.img.backdropSize+t.backdrop_path:null,id:t.id,LetterboxdURI:e.LetterboxdURI,original_language:t.original_language.toUpperCase(),original_title:t.original_title,overview:t.overview,poster_url:t.poster_path?_.img.baseUrl+_.img.posterSize+t.poster_path:null,Rating:e.Rating,release_year:t.release_date.split("-")[0],title:t.title,tmdbURI:"https://www.themoviedb.org/movie/".concat(t.id),vote_average:t.vote_average,vote_count:t.vote_count}}const P=o.a.createContext(),C={movieInfo:{backdrop_url:_.img.fallbackUrl,id:"",LetterboxdURI:"",overview:"",poster_url:_.img.fallbackUrl,Rating:"",title:"",vote_average:""},movieInfoStatus:""};function I(e,t){switch(t.type){case"setMovieInfo":return Object(b.a)(Object(b.a)({},e),{},{movieInfo:t.payload,movieInfoStatus:"loaded"});case"setMovieInfoStatus":return Object(b.a)(Object(b.a)({},e),{},{movieInfoStatus:t.payload});default:throw new Error}}const F=({children:e,movie:t})=>{const a=Object(s.useReducer)(I,C),o=Object(n.a)(a,2),r=o[0],i=o[1];function c(e){void 0!==e?(i({type:"setMovieInfoStatus",payload:"loading"}),(e=>fetch("".concat(_.url).concat(_.pathSearchMovies,"?").concat(_.key,"&query=").concat(e.Name,"&year=").concat(e.Year)).then((e=>{if(!e.ok)throw Error(e.status);return e.json()})))(e).then((t=>{if(!t.results.length)throw Error("No movie found");{const a=t.results.find((t=>t.title===e.Name&&t.release_date.indexOf(e.Year)>-1));if(void 0===a)throw Error("No movie found");i({type:"setMovieInfo",payload:k(e,a)})}})).catch((e=>{i({type:"setMovieInfoStatus",payload:"error"}),console.log(e.message)}))):i({type:"setMovieInfoStatus",payload:"error"})}Object(s.useEffect)((()=>{c(t)}),[t]);const l=Object(s.useMemo)((()=>r),[r]);return Object(h.jsx)(P.Provider,{value:l,children:e})};var U=Object(s.memo)((function({type:e}){const t={error:{icon:"sad-tear",text:"An error has ocurred"},loading:{icon:"hourglass-half",text:"Loading..."},noData:{icon:"frown",text:"No data to show"},noMovies:{icon:"frown",text:"No movies to show"},noStats:{icon:"frown",text:"No stats to show"},pageNotFound:{icon:"dizzy",text:"Page not found"}},a="animate__".concat("loading"===e?"heartBeat":"headShake");return Object(h.jsxs)("div",{className:"lead p-3 text-center",children:[Object(h.jsx)("div",{className:"animate__animated ".concat(a," h3 mb-3"),children:Object(h.jsx)("span",{className:"bg-secondary p-2 rounded",children:Object(h.jsx)(N.a,{icon:t[e].icon})})}),t[e].text]})}));const E=Object(s.memo)((function({children:e,dataStatus:t,hasData:a,messageNoData:s}){return Object(h.jsxs)(h.Fragment,{children:["loaded"===t&&a&&Object(h.jsx)(h.Fragment,{children:e}),"loaded"===t&&!a&&Object(h.jsx)(U,{type:s}),("loading"===t||"error"===t)&&Object(h.jsx)(U,{type:t})]})}));E.defaultProps={dataStatus:"",hasData:!0,messageNoData:"noData"};var L=E;const T=o.a.createContext(),W={movieCredits:{cast:[],crew:[],id:""},movieCreditsStatus:""};function A(e,t){switch(t.type){case"setMovieCredits":return Object(b.a)(Object(b.a)({},e),{},{movieCredits:t.payload,movieCreditsStatus:"loaded"});case"setMovieCreditsStatus":return Object(b.a)(Object(b.a)({},e),{},{movieCreditsStatus:t.payload});default:throw new Error}}const Y=({children:e,movieId:t})=>{const a=Object(s.useReducer)(A,W),o=Object(n.a)(a,2),r=o[0],i=o[1];function c(e){i({type:"setMovieCreditsStatus",payload:"loading"}),(e=>{const t="".concat(_.url).concat(_.pathMovieCredits,"?").concat(_.key).replace("{movie_id}",e);return fetch(t).then((e=>{if(!e.ok)throw Error(e.status);return e.json()}))})(e).then((e=>{var t;i({type:"setMovieCredits",payload:(t=e,t.cast.forEach((e=>{e.tmdbURI="https://www.themoviedb.org/person/".concat(e.id)})),t.crew.forEach((e=>{e.tmdbURI="https://www.themoviedb.org/person/".concat(e.id)})),t)})})).catch((e=>{i({type:"setMovieCreditsStatus",payload:"error"}),console.log(e.message)}))}Object(s.useEffect)((()=>{c(t)}),[t]);const l=Object(s.useMemo)((()=>r),[r]);return Object(h.jsx)(T.Provider,{value:l,children:e})};const z=o.a.createContext(),B={movieRecommendations:[],movieRecommendationsStatus:""};function G(e,t){switch(t.type){case"setMovieRecommendations":return Object(b.a)(Object(b.a)({},e),{},{movieRecommendations:t.payload,movieRecommendationsStatus:"loaded"});case"setMovieRecommendationsStatus":return Object(b.a)(Object(b.a)({},e),{},{movieRecommendationsStatus:t.payload});default:throw new Error}}const q=({children:e,movieId:t})=>{const a=Object(s.useReducer)(G,B),o=Object(n.a)(a,2),r=o[0],i=o[1];function c(e){i({type:"setMovieRecommendationsStatus",payload:"loading"}),(e=>{const t="".concat(_.url).concat(_.pathMovieRecommendations,"?").concat(_.key).replace("{movie_id}",e);return fetch(t).then((e=>{if(!e.ok)throw Error(e.status);return e.json()}))})(e).then((e=>{var t;i({type:"setMovieRecommendations",payload:(t=e.results,t.forEach((e=>{e.poster_url=e.poster_path?_.img.baseUrl+_.img.posterSize+e.poster_path:null,e.tmdbURI="https://www.themoviedb.org/movie/".concat(e.id)})),t)})})).catch((e=>{i({type:"setMovieRecommendationsStatus",payload:"error"}),console.log(e.message)}))}Object(s.useEffect)((()=>{c(t)}),[t]);const l=Object(s.useMemo)((()=>r),[r]);return Object(h.jsx)(z.Provider,{value:l,children:e})};var J=({backdrop_url:e,title:t})=>{const a={paddingTop:"".concat(300/533*100,"%")};return Object(h.jsx)("div",{className:"bg-secondary embed-responsive text-white",style:a,children:e?Object(h.jsx)("img",{alt:"Backdrop for ".concat(t),className:"embed-responsive-item",src:e}):Object(h.jsx)("div",{className:"embed-responsive-item text-center",children:"No backdrop available for ".concat(t)})})};var V=()=>{const e=Object(s.useContext)(T),t=e.movieCredits,a=e.movieCreditsStatus,o={overflowX:"scroll",WebkitOverflowScrolling:"touch"};return Object(h.jsxs)(L,{dataStatus:a,hasData:!!t.id,children:[Object(h.jsxs)("h2",{className:"h4",children:["Cast",Object(h.jsx)(N.a,{className:"ml-1 small",icon:"external-link-alt"})]}),t.cast.length?Object(h.jsx)("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:o,children:t.cast.map((e=>Object(h.jsx)("li",{className:"col-auto mb-3",children:Object(h.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(h.jsx)("div",{className:"small",children:e.character})]})},e.credit_id)))}):Object(h.jsx)("p",{children:"No data available"}),Object(h.jsxs)("h2",{className:"h4",children:["Crew",Object(h.jsx)(N.a,{className:"ml-1 small",icon:"external-link-alt"})]}),t.crew.length?Object(h.jsx)("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:o,children:t.crew.map((e=>Object(h.jsx)("li",{className:"col-auto mb-3",children:Object(h.jsxs)("a",{className:"btn btn-secondary btn-sm",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[e.name,Object(h.jsx)("div",{className:"small",children:e.job})]})},e.credit_id)))}):Object(h.jsx)("p",{children:"No data available"})]})};var X=({poster_url:e,title:t})=>{const a={paddingTop:"".concat(150,"%")};return Object(h.jsx)("div",{className:"bg-secondary embed-responsive text-white",style:a,children:e?Object(h.jsx)("img",{alt:"Poster for ".concat(t),className:"embed-responsive-item",src:e}):Object(h.jsx)("div",{className:"embed-responsive-item text-center",children:"No poster available for ".concat(t)})})};var $=()=>{const e=Object(s.useContext)(z),t=e.movieRecommendations,a=e.movieRecommendationsStatus;return Object(h.jsx)(L,{dataStatus:a,hasData:!!t.length,children:Object(h.jsxs)("div",{className:"p-3",children:[Object(h.jsxs)("h2",{className:"h4",children:["Recommendations",Object(h.jsx)(N.a,{className:"ml-1 small",icon:"external-link-alt"})]}),Object(h.jsx)("ul",{className:"flex-nowrap form-row list-unstyled mb-0",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:t.map((e=>Object(h.jsx)("li",{className:"col-5 col-md-3 col-lg-2 mb-3",children:Object(h.jsxs)("a",{className:"text-danger",href:e.tmdbURI,rel:"noopener noreferrer",target:"_blank",children:[Object(h.jsx)(X,{poster_url:e.poster_url,title:e.title}),e.title]})},e.id)))})]})})};var H=()=>{const e=Object(s.useContext)(P).movieInfo;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"p-3",children:[Object(h.jsxs)("div",{className:"animate__animated animate__fadeInUp mb-3 row",children:[Object(h.jsx)("div",{className:"col-6 col-lg-4",children:Object(h.jsx)(X,{poster_url:e.poster_url,title:e.title})}),Object(h.jsxs)("div",{className:"col-12 col-sm-6 col-lg-8 text-right",children:[Object(h.jsx)("div",{className:"lead text-left",children:e.overview}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)("span",{className:"badge badge-secondary ml-2",children:e.original_language})}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)("a",{className:"btn btn-danger btn-sm",href:e.LetterboxdURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at Letterboxd"})}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)("a",{className:"btn btn-danger btn-sm",href:e.tmdbURI,target:"_blank",rel:"noopener noreferrer",children:"View movie at TMDB"})})]})]}),Object(h.jsx)(Y,{movieId:e.id,children:Object(h.jsx)(V,{})})]}),Object(h.jsx)(J,{backdrop_url:e.backdrop_url,title:e.title}),Object(h.jsx)(q,{movieId:e.id,children:Object(h.jsx)($,{})})]})};var K=()=>{const e=Object(s.useContext)(P).movieInfo;return Object(h.jsxs)("div",{className:"bg-secondary p-3",children:[Object(h.jsxs)("h1",{className:"h3",children:[e.title,Object(h.jsx)("span",{className:"font-italic ml-2 small",children:"(".concat(e.release_year).concat(e.title!==e.original_title?', "'.concat(e.original_title,'"'):"",")")})]}),Object(h.jsxs)("div",{className:"small",children:[e.Rating," of 5",Object(h.jsx)(N.a,{className:"mx-1 text-warning",icon:"star"}),Object(h.jsx)("span",{className:"small",children:"by me"})]}),Object(h.jsxs)("div",{className:"small",children:[e.vote_average," of 10",Object(h.jsx)(N.a,{className:"mx-1 text-warning",icon:"star"}),Object(h.jsx)("span",{className:"small",children:"by ".concat(e.vote_count," TMDb users")})]})]})};var Q=()=>{const e=Object(s.useContext)(P),t=e.movieInfo,a=e.movieInfoStatus;return Object(h.jsx)(L,{dataStatus:a,hasData:""!==t.id,children:Object(h.jsxs)("div",{className:"border border-secondary mb-3 rounded",children:[Object(h.jsx)(K,{}),Object(h.jsx)(H,{})]})})};var Z=({match:e})=>{const t=Object(s.useContext)(u).movieDiary,a=Object(s.useContext)(x).movieRatings,o=e.params.movieId,r=[...t,...a].find((e=>e.Id===o));return Object(h.jsx)(F,{movie:r,children:Object(h.jsx)(Q,{})})};var ee=Object(s.memo)((function({movie:e,type:t}){let a;return"Diary"===t&&e.WatchedDateFormatted?a="watched in ".concat(e.WatchedDateFormatted):"Ratings"===t&&e.DateFormatted&&(a="rated in ".concat(e.DateFormatted)),Object(h.jsxs)(c.b,{className:"btn btn-secondary btn-block",to:"/movie/".concat(e.Id),children:[Object(h.jsxs)("div",{className:"text-left text-truncate",children:[e.Name,Object(h.jsxs)("span",{className:"ml-1 small",children:["(",e.Year,")"]})]}),Object(h.jsxs)("div",{className:"align-items-end row small",children:[Object(h.jsx)("div",{className:"col text-left text-warning",children:Array.from(Array(e.Rating)).map(((e,t)=>Object(h.jsx)(N.a,{className:"mr-1",icon:"star"},t)))}),Object(h.jsx)("div",{className:"col small text-right",children:a})]})]})}));const te={dispatchMovie:null,dispatchMovieType:"",moviesFiltered:[],moviesPaginated:[],moviesStatus:null};function ae(e,t){switch(t.type){case"setAll":return Object(b.a)(Object(b.a)({},e),t.payload);default:throw new Error}}var se=Object(s.memo)((function({type:e}){const t=Object(s.useReducer)(ae,te),a=Object(n.a)(t,2),o=a[0],r=a[1],i=Object(s.useContext)(u),c=i.dispatchMovieDiary,l=i.movieDiaryFiltered,d=i.movieDiaryPage,m=i.movieDiaryPaginated,b=i.movieDiarySearchString,j=i.movieDiaryStatus,v=Object(s.useContext)(x),g=v.dispatchMovieRatings,p=v.movieRatingsFiltered,O=v.movieRatingsPage,y=v.movieRatingsPaginated,f=v.movieRatingsSearchString,w=v.movieRatingsStatus;return Object(s.useEffect)((()=>{let t;"Diary"===e?t={dispatchMovie:c,dispatchMovieType:"setMovieDiaryPage",moviesFiltered:l,moviesPaginated:m,moviesStatus:j}:"Ratings"===e&&(t={dispatchMovie:g,dispatchMovieType:"setMovieRatingsPage",moviesFiltered:p,moviesPaginated:y,moviesStatus:w}),r({type:"setAll",payload:t})}),[c,g,l,d,m,b,j,p,O,y,f,w,e]),Object(h.jsx)(L,{dataStatus:o.moviesStatus,hasData:!!o.moviesFiltered.length,messageNoData:"noMovies",children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("ul",{className:"list-unstyled",children:o.moviesPaginated.map((t=>Object(h.jsx)("li",{className:"mb-3",children:Object(h.jsx)(ee,{movie:t,type:e})},t.Id)))}),o.moviesPaginated.length<o.moviesFiltered.length&&Object(h.jsx)("div",{className:"mb-3 text-center",children:Object(h.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>o.dispatchMovie({type:o.dispatchMovieType}),children:"Show more"})})]})})}));const oe={dispatchMovie:null,dispatchMovieType:"",movieSearchString:"",moviesFiltered:[]};function re(e,t){switch(t.type){case"setAll":return Object(b.a)(Object(b.a)({},e),t.payload);default:throw new Error}}var ie=({type:e})=>{const t=Object(s.useReducer)(re,oe),a=Object(n.a)(t,2),o=a[0],r=a[1],i=Object(s.useContext)(u),c=i.dispatchMovieDiary,l=i.movieDiaryFiltered,d=i.movieDiarySearchString,m=i.movieDiaryStatus,b=Object(s.useContext)(x),j=b.dispatchMovieRatings,v=b.movieRatingsFiltered,g=b.movieRatingsSearchString,p=b.movieRatingsStatus;return Object(s.useEffect)((()=>{let t;"Diary"===e?t={dispatchMovie:c,dispatchMovieType:"setMovieDiarySearchString",movieSearchString:d,moviesFiltered:l}:"Ratings"===e&&(t={dispatchMovie:j,dispatchMovieType:"setMovieRatingsSearchString",movieSearchString:g,moviesFiltered:v}),r({type:"setAll",payload:t})}),[c,j,l,d,m,v,g,p,e]),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsxs)("div",{className:"input-group mb-1",children:[Object(h.jsx)("input",{id:"search-movie",className:"form-control",placeholder:"Search...",type:"text",value:o.movieSearchString,onChange:e=>o.dispatchMovie({type:o.dispatchMovieType,payload:e.target.value})}),Object(h.jsx)("span",{className:"input-group-append",children:Object(h.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:()=>o.dispatchMovie({type:o.dispatchMovieType,payload:""}),children:Object(h.jsx)(N.a,{icon:"times"})})})]}),Object(h.jsxs)("p",{className:"small text-right",children:[o.moviesFiltered.length," movies"]})]})};var ce=({type:e})=>Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"h4",children:e}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12 col-sm-4",children:Object(h.jsx)(ie,{type:e})}),Object(h.jsx)("div",{className:"col-12 col-sm-8",children:Object(h.jsx)(se,{type:e})})]})]});var ne=()=>Object(h.jsx)(U,{type:"pageNotFound"});var le=Object(s.memo)((function({width:e}){return Object(h.jsx)("div",{className:"bg-secondary overflow-hidden rounded",children:Object(h.jsx)("div",{className:"animate__animated animate__slideInLeft bg-danger pb-2 rounded",style:{width:"".concat(e,"%")}})})}));const de={moviesPerDecadeReleased:"Per decade released",moviesPerRatingGiven:"Per rating given",moviesPerYearWatched:"Per year watched"};var me=Object(s.memo)((function({movies:e,moviesStatus:t,type:a}){return Object(h.jsxs)("div",{className:"border border-secondary p-3 rounded",children:[Object(h.jsx)("h1",{className:"h5",children:de[a]}),Object(h.jsx)(L,{dataStatus:t,hasData:!!e.groups,messageNoData:"noStats",children:Object(h.jsx)("ul",{className:"list-unstyled",children:Object.entries(e.groups).reverse().map((([t,s])=>{const o=100*s/e.max;return Object(h.jsxs)("li",{className:"mb-2",children:[Object(h.jsxs)("div",{className:"no-gutters row",children:[Object(h.jsx)("div",{className:"col-auto",children:(()=>{if("moviesPerRatingGiven"===a){let e=[];for(let a=0;a<t;a++)e.push(Object(h.jsx)(N.a,{className:"mr-1 text-warning",icon:"star"},a));return e}return t})()}),Object(h.jsx)("div",{className:"col font-weight-bold text-right",children:s})]}),Object(h.jsx)(le,{width:o})]},t)}))})})]})}));var be=()=>{const e=Object(s.useContext)(u),t=e.moviesPerYearWatched,a=e.movieDiaryStatus,o=Object(s.useContext)(x),r=o.moviesPerDecadeReleased,i=o.moviesPerRatingGiven,c=o.movieRatingsStatus;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"h4",children:"Stats"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",children:Object(h.jsx)(me,{movies:t,moviesStatus:a,type:"moviesPerYearWatched"})}),Object(h.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",children:Object(h.jsx)(me,{movies:i,moviesStatus:c,type:"moviesPerRatingGiven"})}),Object(h.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",children:Object(h.jsx)(me,{movies:r,moviesStatus:c,type:"moviesPerDecadeReleased"})})]})]})};var je=Object(s.memo)((function(){return Object(h.jsxs)("div",{className:"border-secondary border-top pt-3 small text-center",children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("img",{alt:"Letterboxd",src:"https://a.ltrbxd.com/logos/letterboxd-logo-v-neg-rgb-1000px.png",height:"48"}),Object(h.jsx)("br",{}),"My Ratings and Diary data are exported from Letterboxd from time to time.",Object(h.jsx)("br",{}),"My",Object(h.jsxs)("a",{className:"mx-1 text-danger",href:"https://letterboxd.com/saviomd",target:"_blank",rel:"noopener noreferrer",children:["profile",Object(h.jsx)(N.a,{className:"ml-1 small",icon:"external-link-alt"})]}),"will have more up to date information."]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("img",{alt:"TMDb",src:_.img.attributionUrl,height:"48"}),Object(h.jsx)("br",{}),"This product uses the TMDb API but is not endorsed or certified by TMDb."]})]})}));a(35),a(36);d.b.add(m.a,m.b,m.c,m.d,m.e,m.f,m.g,m.h,m.i);const ve={navLinks:[{icon:"star",name:"Ratings",path:"/"},{icon:"calendar-alt",name:"Diary",path:"/diary"},{icon:"chart-bar",name:"Stats",path:"/stats"}]};var he=()=>{const e=Object(s.useState)(ve),t=Object(n.a)(e,1)[0];return Object(h.jsx)(O,{children:Object(h.jsx)(w,{children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"justify-content-center row",children:Object(h.jsxs)("div",{className:"col-12 col-md-10",children:[Object(h.jsx)(D,{navLinks:t.navLinks}),Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{path:"/",exact:!0,render:()=>Object(h.jsx)(ce,{type:"Ratings"})}),Object(h.jsx)(l.a,{path:"/diary",render:()=>Object(h.jsx)(ce,{type:"Diary"})}),Object(h.jsx)(l.a,{path:"/movie/:movieId",render:({match:e})=>Object(h.jsx)(Z,{match:e})}),Object(h.jsx)(l.a,{path:"/stats",component:be}),Object(h.jsx)(l.a,{component:ne})]}),Object(h.jsx)(je,{}),Object(h.jsx)(S,{})]})})})})})};const ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ge(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}const pe=Object(h.jsx)(c.a,{children:Object(h.jsx)(he,{})});i.a.render(pe,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/movieratings",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/movieratings","/service-worker.js");ue?(!function(e,t){fetch(e).then((a=>{const s=a.headers.get("content-type");404===a.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):ge(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):ge(t,e)}))}}()}},[[37,1,2]]]);
//# sourceMappingURL=main.143d6fc0.chunk.js.map